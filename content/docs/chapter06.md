---
title: "Chapter 6: RSI 및 과매수/과매도 전략"
weight: 6
bookToc: true
---

# Chapter 6: RSI 및 과매수/과매도 전략

RSI(Relative Strength Index, 상대강도지수)는 가격의 상승 압력과 하락 압력 간의 상대적인 강도를 측정하는 모멘텀 지표입니다. 이번 챕터에서는 RSI의 계산 방법을 이해하고, 과매수/과매도 신호를 활용한 역추세 전략을 구현합니다.

## 6.1 RSI의 이해

### 6.1.1 RSI 계산 방법

RSI는 다음 단계로 계산됩니다:

**1단계: 상승폭과 하락폭 계산**

$$
\begin{align}
\text{Up}_t &= \max(P_t - P_{t-1}, 0) \\
\text{Down}_t &= \max(P_{t-1} - P_t, 0)
\end{align}
$$

**2단계: 평균 상승폭과 평균 하락폭 계산 (일반적으로 14일 기준)**

첫 번째 평균:
$$
\begin{align}
\text{AvgUp}_{14} &= \frac{1}{14} \sum_{i=1}^{14} \text{Up}_i \\
\text{AvgDown}_{14} &= \frac{1}{14} \sum_{i=1}^{14} \text{Down}_i
\end{align}
$$

이후 평균 (Wilder의 평활화 방법):
$$
\begin{align}
\text{AvgUp}_t &= \frac{13 \cdot \text{AvgUp}_{t-1} + \text{Up}_t}{14} \\
\text{AvgDown}_t &= \frac{13 \cdot \text{AvgDown}_{t-1} + \text{Down}_t}{14}
\end{align}
$$

**3단계: RS(Relative Strength) 계산**

$$
\text{RS}_t = \frac{\text{AvgUp}_t}{\text{AvgDown}_t}
$$

**4단계: RSI 계산**

$$
\text{RSI}_t = 100 - \frac{100}{1 + \text{RS}_t}
$$

또는 다르게 표현하면:

$$
\text{RSI}_t = 100 \times \frac{\text{AvgUp}_t}{\text{AvgUp}_t + \text{AvgDown}_t}
$$

### 6.1.2 RSI의 특성

**값의 범위**: 0 ~ 100
- RSI = 100: 모든 가격 변동이 상승
- RSI = 0: 모든 가격 변동이 하락
- RSI = 50: 상승과 하락이 균형

**일반적인 해석**:
- RSI > 70: **과매수(Overbought)** - 가격이 과도하게 상승, 조정 가능성
- RSI < 30: **과매도(Oversold)** - 가격이 과도하게 하락, 반등 가능성
- RSI ≈ 50: 중립

## 6.2 RSI 과매수/과매도 전략

### 6.2.1 기본 전략

**매수 신호**: RSI가 30 이하로 떨어졌다가 30을 상향 돌파
- 과매도 영역에서 반등 시작

**매도 신호**: RSI가 70 이상으로 올라갔다가 70을 하향 돌파
- 과매수 영역에서 조정 시작

### 6.2.2 전략의 특징

**역추세(Mean Reversion) 전략**:
- 이동평균 전략과 반대되는 접근
- 가격이 극단에 도달하면 평균으로 회귀한다는 가정
- 횡보장이나 범위 제한 시장에서 유리

**장점**:
- 명확한 매매 신호
- 과도한 가격 움직임을 포착
- 단기 매매에 적합
- 횡보장에서 효과적

**단점**:
- 강한 추세 시장에서는 계속 손실 발생 가능
- "가격은 계속 더 오를 수 있고, 더 떨어질 수 있다"
- 추세 전환 시점 포착 어려움

## 6.3 RSI 신호 최적화

### 6.3.1 임계값 조정

기본 30/70 대신 다른 임계값 사용:
- **보수적 접근**: 20/80 - 더 극단적인 상황에서만 매매
- **공격적 접근**: 40/60 - 더 빈번한 매매 신호

### 6.3.2 RSI 다이버전스 (Divergence)

**강세 다이버전스 (Bullish Divergence)**:
- 가격은 더 낮은 저점을 형성
- RSI는 더 높은 저점을 형성
- 하락 추세 약화 신호 → 매수 고려

**약세 다이버전스 (Bearish Divergence)**:
- 가격은 더 높은 고점을 형성
- RSI는 더 낮은 고점을 형성
- 상승 추세 약화 신호 → 매도 고려

### 6.3.3 다른 지표와 결합

RSI 단독 사용의 한계를 극복하기 위해:
- **추세 필터**: 이동평균으로 추세 확인 후 RSI 신호 필터링
- **거래량 확인**: 거래량 증가와 함께 RSI 신호 발생 시 신뢰도 상승
- **지지/저항**: 주요 가격 수준에서 RSI 신호 발생 시 더 강력

## 6.4 실전 구현

이번 챕터의 코드에서는 다음을 구현합니다:

1. **기본 RSI 전략**: 30/70 임계값 사용
2. **보수적 RSI 전략**: 20/80 임계값 사용
3. **추세 필터 추가**: 200일 SMA와 결합한 RSI 전략
4. **성과 비교**: Buy & Hold vs. 각 RSI 전략

### 6.4.1 Backtrader에서 RSI 사용

```python
import backtrader as bt

class RSIStrategy(bt.Strategy):
    params = (
        ('rsi_period', 14),
        ('rsi_lower', 30),
        ('rsi_upper', 70),
    )

    def __init__(self):
        # RSI 지표 추가
        self.rsi = bt.indicators.RSI(
            self.data.close,
            period=self.params.rsi_period
        )
```

### 6.4.2 거래 로직

```python
def next(self):
    if not self.position:
        # 과매도 → 매수
        if self.rsi < self.params.rsi_lower:
            self.buy()
    else:
        # 과매수 → 매도
        if self.rsi > self.params.rsi_upper:
            self.close()
```

## 6.5 실행 결과

코드를 실행한 결과입니다 (Apple Inc., 2019-2024):

```
==================================================
Chapter 6: RSI 및 과매수/과매도 전략
==================================================

=== 백테스트 설정 ===
- 티커: AAPL
- 기간: 2019-01-01 ~ 2024-01-01
- 초기 자금: $10,000.00
- 수수료: 0.1%
- 전략: RSI(14) 과매수/과매도

==================================================
[1/4] 기본 RSI(30/70) 전략 실행 중...

==================================================
=== RSI(30/70) 성과 ===
==================================================

기본 지표:
- 초기 자금: $10,000.00
- 최종 자금: $21,332.43
- 총 수익률: +113.32%

Sharpe Ratio: 1.230

최대 낙폭:
- Max Drawdown: 23.52%
- DD Duration: 316 days

수익률:
- Total Return: +75.76%
- Annualized Return: 16.39%

거래 통계:
- 총 거래: 5
- 승: 5, 패: 0
- 승률: 100.0%
- 평균 수익: $2266.49

==================================================
[2/4] 보수적 RSI(20/80) 전략 실행 중...

==================================================
=== RSI(20/80) 성과 ===
==================================================

기본 지표:
- 초기 자금: $10,000.00
- 최종 자금: $10,000.00
- 총 수익률: +0.00%

최대 낙폭:
- Max Drawdown: 0.00%

수익률:
- Total Return: +0.00%
- Annualized Return: 0.00%

거래 통계:
- 총 거래: 0

==================================================
[3/4] 추세 필터 RSI(30/70) 전략 실행 중...

==================================================
=== RSI(30/70) + SMA(200) 필터 성과 ===
==================================================

기본 지표:
- 초기 자금: $10,000.00
- 최종 자금: $14,714.26
- 총 수익률: +47.14%

Sharpe Ratio: 0.892

최대 낙폭:
- Max Drawdown: 23.52%
- DD Duration: 539 days

수익률:
- Total Return: +38.62%
- Annualized Return: 8.04%

거래 통계:
- 총 거래: 3
- 승: 3, 패: 0
- 승률: 100.0%
- 평균 수익: $1571.42

==================================================
=== 전략 비교 요약 ===
==================================================

Buy & Hold:              +408.08%
RSI(30/70):              +113.32%
RSI(20/80):              +0.00%
RSI(30/70) + 추세 필터:   +47.14%

Buy & Hold 대비:
- RSI(30/70) 초과 수익:         -294.76%
- RSI(20/80) 초과 수익:         -408.08%
- RSI(30/70)+필터 초과 수익:    -360.94%
```

![RSI 과매수/과매도 전략 비교](/images/chapter06/rsi_strategy.png)

### 차트 해석

**상단 패널 - 가격 및 RSI 지표**:
- 파란선은 Apple 주가 추이를 보여줍니다
- 하단의 주황선은 RSI(14) 값을 나타냅니다
- 빨간 점선(RSI=70)과 초록 점선(RSI=30)은 과매수/과매도 임계값입니다
- RSI가 30 아래로 내려가면 과매도 상태, 70 위로 올라가면 과매수 상태입니다

**중간 패널 - RSI(30/70) 매매 신호**:
- 초록색 삼각형(▲)은 RSI가 30 이하에서 반등하는 매수 신호입니다
- 빨간색 역삼각형(▼)은 RSI가 70 이상에서 하락하는 매도 신호입니다
- 2019-2024 기간 동안 총 5회의 매매가 발생했습니다
- 2020년 3월 코로나 폭락 시 강력한 매수 신호가 발생했습니다

**하단 패널 - 전략 성과 비교**:
- 파란선(Buy & Hold)이 가장 높은 수익률을 기록했습니다
- 주황선(RSI 30/70)은 두 번째로 우수한 성과를 보였습니다
- 초록선(RSI with 추세 필터)은 거래를 줄여 수익률이 낮아졌습니다
- RSI(20/80)는 너무 보수적이어서 거래가 전혀 없었습니다 (표시 안 됨)

## 6.6 핵심 인사이트

실행 결과에서 얻을 수 있는 중요한 교훈:

### 1. RSI의 놀라운 성과

RSI(30/70) 전략이 이동평균 크로스오버(Chapter 5)를 압도적으로 이겼습니다:
- **RSI(30/70): +113.32%** vs. SMA(50/200): +11.07%
- **Sharpe Ratio: 1.230** (매우 우수한 위험 조정 수익률)
- **승률: 100%** (5거래 모두 수익)
- **평균 수익: $2,266** per trade

**왜 이렇게 좋은 결과가 나왔을까?**
- 2020년 3월 코로나 폭락 시 과매도 신호로 바닥 근처에서 매수
- 극단적인 가격 변동 시점을 정확히 포착
- 적당한 거래 빈도(5거래)로 수수료 부담 최소화

### 2. 임계값의 중요성: 30/70 vs 20/80

- **RSI(30/70)**: +113.32%, 5거래, 승률 100%
- **RSI(20/80)**: 0%, 0거래

**20/80은 너무 보수적**:
- 5년 동안 단 한 번도 RSI가 20 이하 또는 80 이상에 도달하지 않음
- 극단적인 시장 상황만 기다리다 모든 기회를 놓침
- 실전에서는 쓸모없는 설정

**30/70이 적절한 이유**:
- 적당한 빈도로 거래 기회 포착
- 너무 잦지 않아 수수료 부담 적음
- 진짜 과매수/과매도 상황 포착

### 3. 추세 필터의 양면성

- **필터 없음**: +113.32%, 5거래
- **SMA(200) 필터 추가**: +47.14%, 3거래

**추세 필터가 역효과**:
- 거래를 2회 줄였는데, 그 2회가 수익성 있는 거래였음
- 필터가 좋은 신호까지 걸러버림
- 이 기간 동안 Apple이 지속적 상승 추세여서 "상승 추세 중에만 매수" 필터가 의미 없음

**추세 필터가 유용한 경우**:
- 횡보장이 많은 시장
- 명확한 하락 추세에서 매수 방지
- 거짓 신호(whipsaw) 빈발 시장

### 4. RSI vs 이동평균: 역추세 vs 추세 추종

| 지표 | Chapter 5: MA | Chapter 6: RSI |
|------|--------------|---------------|
| 수익률 | +11.07% (SMA) | +113.32% |
| Sharpe Ratio | 0.266 | 1.230 |
| 거래 횟수 | 2회 | 5회 |
| 승률 | 0% | 100% |
| 전략 타입 | 추세 추종 | 역추세 |

**이 기간 동안 RSI가 압승한 이유**:
- Apple 주가가 급등락을 반복하며 상승 (완벽한 RSI 환경)
- 폭락 후 반등 패턴이 명확했음
- 이동평균은 신호가 너무 느려 기회를 놓침

### 5. 역추세 전략의 핵심

**RSI가 효과적인 시장**:
- ✅ 변동성이 크지만 장기 추세가 있는 시장 (예: 2019-2024 AAPL)
- ✅ 급락 후 반등하는 패턴
- ✅ 과매도/과매수가 명확히 나타나는 시장

**RSI가 위험한 시장**:
- ❌ 지속적 하락 추세 (계속 더 떨어질 수 있음)
- ❌ 극단적 폭락 시장 (30 이하로 계속 머무름)
- ❌ 변동성이 매우 낮은 횡보장

### 6. 실전 적용 교훈

**이 결과가 주는 교훈**:
- ✅ RSI는 강력한 역추세 지표입니다
- ✅ 30/70 임계값이 실용적입니다 (20/80는 너무 보수적)
- ⚠️ 추세 필터는 양날의 검 (좋은 신호도 걸러낼 수 있음)
- ⚠️ 100% 승률은 샘플 사이즈가 작아서 나온 결과 (5거래만으로 일반화 불가)
- ⚠️ 다양한 시장 환경에서 테스트 필요 (Bear market에서는 어떨까?)
- ⚠️ 과거 성과가 미래를 보장하지 않음

## 6.7 추세 추종 vs. 역추세 전략

| 특성 | 추세 추종 (이동평균) | 역추세 (RSI) |
|------|----------------------|--------------|
| 기본 가정 | 추세는 지속된다 | 가격은 평균으로 회귀한다 |
| 유리한 시장 | 강한 트렌드 시장 | 횡보장, 범위 제한 시장 |
| 거래 빈도 | 상대적으로 낮음 | 상대적으로 높음 |
| 신호 지연 | 있음 (늦게 진입) | 없음 (빠른 진입) |
| 위험 | 횡보장에서 손실 | 추세 시장에서 손실 |
| 승률 | 낮지만 큰 이익 | 높지만 작은 이익 |

## 6.8 개선 방향

RSI 전략을 개선할 수 있는 방법:

1. **기간 최적화**: 14일이 아닌 다른 기간 테스트
2. **임계값 최적화**: 30/70이 아닌 최적 임계값 탐색
3. **다이버전스 감지**: RSI와 가격의 다이버전스 패턴 추가
4. **손절/익절**: 고정 비율 또는 ATR 기반 손절매 설정
5. **포지션 크기 조절**: RSI 값에 따른 동적 포지션 크기 조정
6. **다중 시간프레임**: 여러 시간프레임의 RSI 동시 확인

## 다음 단계

다음 챕터에서는 Bollinger Bands를 활용한 변동성 기반 전략을 배웁니다. Bollinger Bands는 RSI와 유사한 역추세 전략이지만, 가격 변동성을 동적으로 고려한다는 점에서 차별화됩니다.

---

**코드 실행:**
```bash
cd codes
uv run chapter06/01_rsi_strategy.py
```
