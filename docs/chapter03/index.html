<!doctype html><html lang=en-us dir=ltr><head><meta charset=UTF-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="Chapter 3: 데이터 전처리와 수익률# 이 챕터에서는 다운로드한 금융 데이터를 백테스팅에 적합한 형태로 전처리하는 방법을 배웁니다. 결측치 처리, 이상치 탐지, 데이터 정합성 검증을 다루고, 단순 수익률과 로그 수익률의 차이를 이해합니다.
3.1 데이터 전처리의 필요성# 왜 전처리가 중요한가?# 다운로드한 원시 데이터(Raw Data)는 다음과 같은 문제를 가질 수 있습니다:
결측치 (Missing Values): 휴장일, 상장폐지, 데이터 수집 오류 이상치 (Outliers): 비현실적인 가격 변동, 데이터 입력 오류 중복 데이터: 동일한 날짜의 중복 레코드 데이터 불일치: 논리적으로 맞지 않는 관계 (예: High < Low) 타임존 문제: 서로 다른 타임존의 데이터 혼재 이러한 문제들을 해결하지 않으면:
"><meta name=theme-color media="(prefers-color-scheme: light)" content="#ffffff"><meta name=theme-color media="(prefers-color-scheme: dark)" content="#343a40"><meta name=color-scheme content="light dark"><meta property="og:url" content="https://k2sebeom.github.io/intro-to-backtesting/docs/chapter03/"><meta property="og:site_name" content="파이썬으로 배우는 백테스팅 입문"><meta property="og:title" content="Chapter 3: 데이터 전처리와 수익률"><meta property="og:description" content="Chapter 3: 데이터 전처리와 수익률# 이 챕터에서는 다운로드한 금융 데이터를 백테스팅에 적합한 형태로 전처리하는 방법을 배웁니다. 결측치 처리, 이상치 탐지, 데이터 정합성 검증을 다루고, 단순 수익률과 로그 수익률의 차이를 이해합니다.
3.1 데이터 전처리의 필요성# 왜 전처리가 중요한가?# 다운로드한 원시 데이터(Raw Data)는 다음과 같은 문제를 가질 수 있습니다:
결측치 (Missing Values): 휴장일, 상장폐지, 데이터 수집 오류 이상치 (Outliers): 비현실적인 가격 변동, 데이터 입력 오류 중복 데이터: 동일한 날짜의 중복 레코드 데이터 불일치: 논리적으로 맞지 않는 관계 (예: High < Low) 타임존 문제: 서로 다른 타임존의 데이터 혼재 이러한 문제들을 해결하지 않으면:"><meta property="og:locale" content="en_us"><meta property="og:type" content="article"><meta property="article:section" content="docs"><meta property="article:modified_time" content="2026-02-05T07:06:17+00:00"><meta itemprop=name content="Chapter 3: 데이터 전처리와 수익률"><meta itemprop=description content="Chapter 3: 데이터 전처리와 수익률# 이 챕터에서는 다운로드한 금융 데이터를 백테스팅에 적합한 형태로 전처리하는 방법을 배웁니다. 결측치 처리, 이상치 탐지, 데이터 정합성 검증을 다루고, 단순 수익률과 로그 수익률의 차이를 이해합니다.
3.1 데이터 전처리의 필요성# 왜 전처리가 중요한가?# 다운로드한 원시 데이터(Raw Data)는 다음과 같은 문제를 가질 수 있습니다:
결측치 (Missing Values): 휴장일, 상장폐지, 데이터 수집 오류 이상치 (Outliers): 비현실적인 가격 변동, 데이터 입력 오류 중복 데이터: 동일한 날짜의 중복 레코드 데이터 불일치: 논리적으로 맞지 않는 관계 (예: High < Low) 타임존 문제: 서로 다른 타임존의 데이터 혼재 이러한 문제들을 해결하지 않으면:"><meta itemprop=dateModified content="2026-02-05T07:06:17+00:00"><meta itemprop=wordCount content="1600"><title>Chapter 3: 데이터 전처리와 수익률 | 파이썬으로 배우는 백테스팅 입문</title><link rel=icon href=/intro-to-backtesting/favicon.png><link rel=manifest href=/intro-to-backtesting/manifest.json><link rel=canonical href=https://k2sebeom.github.io/intro-to-backtesting/docs/chapter03/><link rel=stylesheet href=/intro-to-backtesting/book.min.cc2c524ed250aac81b23d1f4af87344917b325208841feca0968fe450f570575.css integrity="sha256-zCxSTtJQqsgbI9H0r4c0SRezJSCIQf7KCWj+RQ9XBXU=" crossorigin=anonymous><script defer src=/intro-to-backtesting/fuse.min.js></script><script defer src=/intro-to-backtesting/en.search.min.045ca227d4176807ad581a410adc82f05790d9bf1e41b6de6824aa408874b1e4.js integrity="sha256-BFyiJ9QXaAetWBpBCtyC8FeQ2b8eQbbeaCSqQIh0seQ=" crossorigin=anonymous></script><script id=MathJax-script async src=https://cdn.jsdelivr.net/npm/mathjax@4/tex-mml-chtml.js></script><script>MathJax={tex:{displayMath:[["\\[","\\]"],["$$","$$"]],inlineMath:[["\\(","\\)"],["$","$"]]},loader:{load:["ui/safe"]}}</script></head><body dir=ltr class="book-kind-page book-type-docs"><input type=checkbox class="hidden toggle" id=menu-control>
<input type=checkbox class="hidden toggle" id=toc-control><main class="container flex"><aside class=book-menu><div class=book-menu-content><nav><h2 class=book-brand><a class="flex align-center" href=/intro-to-backtesting/><span>파이썬으로 배우는 백테스팅 입문</span></a></h2><div class="book-search hidden"><input id=book-search-input type=text placeholder=Search aria-label=Search maxlength=64 data-hotkeys=s/><div class="book-search-spinner hidden"></div><ul id=book-search-results></ul></div><script>document.querySelector(".book-search").classList.remove("hidden")</script><ul><li><a href=/intro-to-backtesting/docs/chapter01/>Chapter 1: 백테스팅 시작하기</a></li><li><a href=/intro-to-backtesting/docs/chapter02/>Chapter 2: 금융 데이터 다운로드와 이해</a></li><li><a href=/intro-to-backtesting/docs/chapter03/ class=active>Chapter 3: 데이터 전처리와 수익률</a></li><li><a href=/intro-to-backtesting/docs/chapter04/>Chapter 4: Backtrader 프레임워크 기초</a></li><li><a href=/intro-to-backtesting/docs/chapter05/>Chapter 5: 이동평균 전략</a></li><li><a href=/intro-to-backtesting/docs/chapter06/>Chapter 6: RSI 및 과매수/과매도 전략</a></li><li><a href=/intro-to-backtesting/docs/chapter07/>Chapter 7: Bollinger Bands 전략</a></li><li><a href=/intro-to-backtesting/docs/chapter08/>Chapter 8: 다중 지표 결합 전략</a></li><li><a href=/intro-to-backtesting/docs/chapter09/>Chapter 9: 포지션 크기 결정</a></li><li><a href=/intro-to-backtesting/docs/chapter10/>Chapter 10: 리스크 관리와 손절매</a></li><li><a href=/intro-to-backtesting/docs/chapter11/>Chapter 11: 포트폴리오 구성과 분산투자</a></li><li><a href=/intro-to-backtesting/docs/chapter12/>Chapter 12: 성과 지표와 리스크 측정</a></li><li><a href=/intro-to-backtesting/docs/chapter13/>Chapter 13: 백테스트 결과 분석과 시각화</a></li><li><a href=/intro-to-backtesting/docs/chapter14/>Chapter 14: 과최적화 방지와 검증</a></li><li><a href=/intro-to-backtesting/docs/chapter15/>Chapter 15: 머신러닝 기반 전략 (1)</a></li><li><a href=/intro-to-backtesting/docs/chapter16/>Chapter 16: 머신러닝 기반 전략 (2)</a></li><li><a href=/intro-to-backtesting/docs/chapter17/>Chapter 17: 실전 트레이딩 고려사항</a></li><li><a href=/intro-to-backtesting/docs/chapter18/>Chapter 18: 완전한 전략 개발 프로세스</a></li></ul></nav><script>(function(){var e=document.querySelector("aside .book-menu-content");addEventListener("beforeunload",function(){localStorage.setItem("menu.scrollTop",e.scrollTop)}),e.scrollTop=localStorage.getItem("menu.scrollTop")})()</script></div></aside><div class=book-page><header class="book-header hidden"><div class="flex align-center justify-between"><label for=menu-control><img src=/intro-to-backtesting/icons/menu.svg class=book-icon alt=Menu></label><h3>Chapter 3: 데이터 전처리와 수익률</h3><label for=toc-control><img src=/intro-to-backtesting/icons/toc.svg class=book-icon alt="Table of Contents"></label></div><aside class=hidden><nav id=TableOfContents><ul><li><a href=#31-데이터-전처리의-필요성>3.1 데이터 전처리의 필요성</a><ul><li><a href=#왜-전처리가-중요한가>왜 전처리가 중요한가?</a></li></ul></li><li><a href=#32-결측치-처리>3.2 결측치 처리</a><ul><li><a href=#결측치-확인>결측치 확인</a></li><li><a href=#결측치-처리-방법>결측치 처리 방법</a></li><li><a href=#권장-사항>권장 사항</a></li></ul></li><li><a href=#33-이상치-탐지>3.3 이상치 탐지</a><ul><li><a href=#이상치란>이상치란?</a></li><li><a href=#이상치-탐지-방법>이상치 탐지 방법</a></li></ul></li><li><a href=#34-데이터-정합성-검증>3.4 데이터 정합성 검증</a><ul><li><a href=#가격-논리-검증>가격 논리 검증</a></li></ul></li><li><a href=#35-수익률-계산>3.5 수익률 계산</a><ul><li><a href=#단순-수익률-simple-returns>단순 수익률 (Simple Returns)</a></li><li><a href=#로그-수익률-log-returns>로그 수익률 (Log Returns)</a></li><li><a href=#단순-vs-로그-수익률-비교>단순 vs. 로그 수익률 비교</a></li><li><a href=#누적-수익률-계산>누적 수익률 계산</a></li></ul></li><li><a href=#36-벤치마크-비교>3.6 벤치마크 비교</a><ul><li><a href=#벤치마크란>벤치마크란?</a></li><li><a href=#초과-수익률-excess-returns>초과 수익률 (Excess Returns)</a></li></ul></li><li><a href=#37-실습-데이터-전처리-파이프라인>3.7 실습: 데이터 전처리 파이프라인</a><ul><li><a href=#코드-실행>코드 실행</a></li><li><a href=#실행-결과-분석>실행 결과 분석</a></li><li><a href=#차트-해석>차트 해석</a></li><li><a href=#데이터-품질-인사이트>데이터 품질 인사이트</a></li></ul></li><li><a href=#38-다음-단계>3.8 다음 단계</a><ul><li><a href=#이-챕터에서-배운-것>이 챕터에서 배운 것</a></li><li><a href=#실습-과제>실습 과제</a></li><li><a href=#다음-챕터-미리보기>다음 챕터 미리보기</a></li></ul></li></ul></nav></aside></header><article class="markdown book-article"><h1 id=chapter-3-데이터-전처리와-수익률>Chapter 3: 데이터 전처리와 수익률<a class=anchor href=#chapter-3-%eb%8d%b0%ec%9d%b4%ed%84%b0-%ec%a0%84%ec%b2%98%eb%a6%ac%ec%99%80-%ec%88%98%ec%9d%b5%eb%a5%a0>#</a></h1><p>이 챕터에서는 다운로드한 금융 데이터를 백테스팅에 적합한 형태로 전처리하는 방법을 배웁니다. 결측치 처리, 이상치 탐지, 데이터 정합성 검증을 다루고, 단순 수익률과 로그 수익률의 차이를 이해합니다.</p><h2 id=31-데이터-전처리의-필요성>3.1 데이터 전처리의 필요성<a class=anchor href=#31-%eb%8d%b0%ec%9d%b4%ed%84%b0-%ec%a0%84%ec%b2%98%eb%a6%ac%ec%9d%98-%ed%95%84%ec%9a%94%ec%84%b1>#</a></h2><h3 id=왜-전처리가-중요한가>왜 전처리가 중요한가?<a class=anchor href=#%ec%99%9c-%ec%a0%84%ec%b2%98%eb%a6%ac%ea%b0%80-%ec%a4%91%ec%9a%94%ed%95%9c%ea%b0%80>#</a></h3><p>다운로드한 원시 데이터(Raw Data)는 다음과 같은 문제를 가질 수 있습니다:</p><ol><li><strong>결측치 (Missing Values)</strong>: 휴장일, 상장폐지, 데이터 수집 오류</li><li><strong>이상치 (Outliers)</strong>: 비현실적인 가격 변동, 데이터 입력 오류</li><li><strong>중복 데이터</strong>: 동일한 날짜의 중복 레코드</li><li><strong>데이터 불일치</strong>: 논리적으로 맞지 않는 관계 (예: High &lt; Low)</li><li><strong>타임존 문제</strong>: 서로 다른 타임존의 데이터 혼재</li></ol><p>이러한 문제들을 해결하지 않으면:</p><ul><li>❌ 잘못된 백테스팅 결과</li><li>❌ 비현실적인 수익률 계산</li><li>❌ 전략 실행 오류 (NaN, Inf 등)</li></ul><h2 id=32-결측치-처리>3.2 결측치 처리<a class=anchor href=#32-%ea%b2%b0%ec%b8%a1%ec%b9%98-%ec%b2%98%eb%a6%ac>#</a></h2><h3 id=결측치-확인>결측치 확인<a class=anchor href=#%ea%b2%b0%ec%b8%a1%ec%b9%98-%ed%99%95%ec%9d%b8>#</a></h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#f92672>import</span> pandas <span style=color:#66d9ef>as</span> pd
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># 데이터 로드</span>
</span></span><span style=display:flex><span>data <span style=color:#f92672>=</span> pd<span style=color:#f92672>.</span>read_csv(<span style=color:#e6db74>&#39;data/AAPL_5y.csv&#39;</span>, index_col<span style=color:#f92672>=</span><span style=color:#e6db74>&#39;Date&#39;</span>, parse_dates<span style=color:#f92672>=</span><span style=color:#66d9ef>True</span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># 결측치 확인</span>
</span></span><span style=display:flex><span>print(data<span style=color:#f92672>.</span>isnull()<span style=color:#f92672>.</span>sum())
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># 결측치 비율</span>
</span></span><span style=display:flex><span>missing_pct <span style=color:#f92672>=</span> (data<span style=color:#f92672>.</span>isnull()<span style=color:#f92672>.</span>sum() <span style=color:#f92672>/</span> len(data)) <span style=color:#f92672>*</span> <span style=color:#ae81ff>100</span>
</span></span><span style=display:flex><span>print(<span style=color:#e6db74>f</span><span style=color:#e6db74>&#34;</span><span style=color:#ae81ff>\n</span><span style=color:#e6db74>결측치 비율:&#34;</span>)
</span></span><span style=display:flex><span>print(missing_pct)</span></span></code></pre></div><h3 id=결측치-처리-방법>결측치 처리 방법<a class=anchor href=#%ea%b2%b0%ec%b8%a1%ec%b9%98-%ec%b2%98%eb%a6%ac-%eb%b0%a9%eb%b2%95>#</a></h3><p><strong>방법 1: 삭제 (Deletion)</strong></p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#75715e># 결측치가 있는 행 삭제</span>
</span></span><span style=display:flex><span>data_clean <span style=color:#f92672>=</span> data<span style=color:#f92672>.</span>dropna()
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># 특정 컬럼의 결측치만 삭제</span>
</span></span><span style=display:flex><span>data_clean <span style=color:#f92672>=</span> data<span style=color:#f92672>.</span>dropna(subset<span style=color:#f92672>=</span>[<span style=color:#e6db74>&#39;Close&#39;</span>, <span style=color:#e6db74>&#39;Volume&#39;</span>])</span></span></code></pre></div><p><strong>장점</strong>: 간단하고 명확
<strong>단점</strong>: 데이터 손실, 시계열 연속성 깨짐</p><p><strong>방법 2: 전방 채우기 (Forward Fill)</strong></p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#75715e># 이전 값으로 채우기</span>
</span></span><span style=display:flex><span>data_filled <span style=color:#f92672>=</span> data<span style=color:#f92672>.</span>fillna(method<span style=color:#f92672>=</span><span style=color:#e6db74>&#39;ffill&#39;</span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># 또는</span>
</span></span><span style=display:flex><span>data_filled <span style=color:#f92672>=</span> data<span style=color:#f92672>.</span>ffill()</span></span></code></pre></div><p><strong>장점</strong>: 시계열 연속성 유지
<strong>단점</strong>: 장기간 결측 시 부정확</p><p><strong>방법 3: 보간 (Interpolation)</strong></p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#75715e># 선형 보간</span>
</span></span><span style=display:flex><span>data_interpolated <span style=color:#f92672>=</span> data<span style=color:#f92672>.</span>interpolate(method<span style=color:#f92672>=</span><span style=color:#e6db74>&#39;linear&#39;</span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># 시계열 보간</span>
</span></span><span style=display:flex><span>data_interpolated <span style=color:#f92672>=</span> data<span style=color:#f92672>.</span>interpolate(method<span style=color:#f92672>=</span><span style=color:#e6db74>&#39;time&#39;</span>)</span></span></code></pre></div><p><strong>장점</strong>: 더 정확한 추정
<strong>단점</strong>: 실제 데이터 아님</p><h3 id=권장-사항>권장 사항<a class=anchor href=#%ea%b6%8c%ec%9e%a5-%ec%82%ac%ed%95%ad>#</a></h3><p>금융 데이터의 경우:</p><ul><li><strong>가격 데이터</strong>: Forward fill 사용 (주말/휴장일은 이전 종가 유지)</li><li><strong>거래량</strong>: 0으로 채우거나 삭제</li><li><strong>긴 공백</strong>: 삭제 권장 (데이터 신뢰성 문제)</li></ul><h2 id=33-이상치-탐지>3.3 이상치 탐지<a class=anchor href=#33-%ec%9d%b4%ec%83%81%ec%b9%98-%ed%83%90%ec%a7%80>#</a></h2><h3 id=이상치란>이상치란?<a class=anchor href=#%ec%9d%b4%ec%83%81%ec%b9%98%eb%9e%80>#</a></h3><p>**이상치(Outlier)**는 다른 데이터와 크게 다른 값입니다. 금융 데이터에서:</p><ul><li><strong>정상적 이상치</strong>: 실제 극단적 시장 상황 (블랙 먼데이, 플래시 크래시)</li><li><strong>비정상적 이상치</strong>: 데이터 오류, 입력 실수</li></ul><h3 id=이상치-탐지-방법>이상치 탐지 방법<a class=anchor href=#%ec%9d%b4%ec%83%81%ec%b9%98-%ed%83%90%ec%a7%80-%eb%b0%a9%eb%b2%95>#</a></h3><p><strong>방법 1: 통계적 방법 (Z-Score)</strong></p>$$Z = \frac{X - \mu}{\sigma}$$<p>$|Z| > 3$ 이면 이상치로 간주</p><p><strong>방법 2: IQR (Interquartile Range)</strong></p>$$IQR = Q3 - Q1$$<p></p>$$Outlier: X < Q1 - 1.5 \times IQR \text{ or } X > Q3 + 1.5 \times IQR$$<p><strong>중요</strong>: 금융 데이터에서는 <strong>이상치를 삭제하지 않는 것이 원칙</strong>입니다!</p><p>이유:</p><ul><li>실제 시장 상황 반영</li><li>극단적 상황에서의 전략 테스트 필요</li><li>리스크 관리 검증</li></ul><h2 id=34-데이터-정합성-검증>3.4 데이터 정합성 검증<a class=anchor href=#34-%eb%8d%b0%ec%9d%b4%ed%84%b0-%ec%a0%95%ed%95%a9%ec%84%b1-%ea%b2%80%ec%a6%9d>#</a></h2><h3 id=가격-논리-검증>가격 논리 검증<a class=anchor href=#%ea%b0%80%ea%b2%a9-%eb%85%bc%eb%a6%ac-%ea%b2%80%ec%a6%9d>#</a></h3><p>OHLCV 데이터는 다음 관계를 만족해야 합니다:</p>$$High \geq \max(Open, Close)$$<p></p>$$Low \leq \min(Open, Close)$$<p></p>$$High \geq Low$$<p></p>$$Volume \geq 0$$<h2 id=35-수익률-계산>3.5 수익률 계산<a class=anchor href=#35-%ec%88%98%ec%9d%b5%eb%a5%a0-%ea%b3%84%ec%82%b0>#</a></h2><h3 id=단순-수익률-simple-returns>단순 수익률 (Simple Returns)<a class=anchor href=#%eb%8b%a8%ec%88%9c-%ec%88%98%ec%9d%b5%eb%a5%a0-simple-returns>#</a></h3><p><strong>정의</strong>:</p>$$R_t = \frac{P_t - P_{t-1}}{P_{t-1}} = \frac{P_t}{P_{t-1}} - 1$$<p><strong>특징</strong>:</p><ul><li>✅ 직관적이고 이해하기 쉬움</li><li>✅ 실제 손익과 직접 연결</li><li>❌ 시간 가산성 없음 (여러 기간 합산 불가)</li></ul><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#75715e># Pandas로 계산</span>
</span></span><span style=display:flex><span>simple_returns <span style=color:#f92672>=</span> data[<span style=color:#e6db74>&#39;Close&#39;</span>]<span style=color:#f92672>.</span>pct_change()
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># 수동 계산</span>
</span></span><span style=display:flex><span>simple_returns <span style=color:#f92672>=</span> (data[<span style=color:#e6db74>&#39;Close&#39;</span>] <span style=color:#f92672>/</span> data[<span style=color:#e6db74>&#39;Close&#39;</span>]<span style=color:#f92672>.</span>shift(<span style=color:#ae81ff>1</span>)) <span style=color:#f92672>-</span> <span style=color:#ae81ff>1</span></span></span></code></pre></div><h3 id=로그-수익률-log-returns>로그 수익률 (Log Returns)<a class=anchor href=#%eb%a1%9c%ea%b7%b8-%ec%88%98%ec%9d%b5%eb%a5%a0-log-returns>#</a></h3><p><strong>정의</strong>:</p>$$r_t = \ln\left(\frac{P_t}{P_{t-1}}\right) = \ln(P_t) - \ln(P_{t-1})$$<p><strong>특징</strong>:</p><ul><li>✅ 시간 가산성: $r_{total} = r_1 + r_2 + ... + r_n$</li><li>✅ 대칭성: 상승 10%, 하락 10%가 대칭적</li><li>✅ 통계적 특성 우수 (정규분포에 가까움)</li><li>❌ 직관적이지 않음</li></ul><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#75715e># Pandas로 계산</span>
</span></span><span style=display:flex><span>log_returns <span style=color:#f92672>=</span> np<span style=color:#f92672>.</span>log(data[<span style=color:#e6db74>&#39;Close&#39;</span>] <span style=color:#f92672>/</span> data[<span style=color:#e6db74>&#39;Close&#39;</span>]<span style=color:#f92672>.</span>shift(<span style=color:#ae81ff>1</span>))
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># 또는</span>
</span></span><span style=display:flex><span>log_returns <span style=color:#f92672>=</span> np<span style=color:#f92672>.</span>log(data[<span style=color:#e6db74>&#39;Close&#39;</span>])<span style=color:#f92672>.</span>diff()</span></span></code></pre></div><h3 id=단순-vs-로그-수익률-비교>단순 vs. 로그 수익률 비교<a class=anchor href=#%eb%8b%a8%ec%88%9c-vs-%eb%a1%9c%ea%b7%b8-%ec%88%98%ec%9d%b5%eb%a5%a0-%eb%b9%84%ea%b5%90>#</a></h3><p><strong>언제 무엇을 사용할까?</strong></p><table><thead><tr><th>용도</th><th>권장</th></tr></thead><tbody><tr><td>일반 백테스팅</td><td>단순 수익률</td></tr><tr><td>통계 분석</td><td>로그 수익률</td></tr><tr><td>포트폴리오 최적화</td><td>로그 수익률</td></tr><tr><td>사용자 리포트</td><td>단순 수익률</td></tr><tr><td>리스크 모델링</td><td>로그 수익률</td></tr></tbody></table><h3 id=누적-수익률-계산>누적 수익률 계산<a class=anchor href=#%eb%88%84%ec%a0%81-%ec%88%98%ec%9d%b5%eb%a5%a0-%ea%b3%84%ec%82%b0>#</a></h3><p><strong>단순 수익률의 누적</strong>:</p>$$R_{cumulative} = \prod_{t=1}^{n}(1 + R_t) - 1$$<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#75715e># 방법 1: cumprod</span>
</span></span><span style=display:flex><span>cumulative_returns <span style=color:#f92672>=</span> (<span style=color:#ae81ff>1</span> <span style=color:#f92672>+</span> simple_returns)<span style=color:#f92672>.</span>cumprod() <span style=color:#f92672>-</span> <span style=color:#ae81ff>1</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># 방법 2: 가격 비율</span>
</span></span><span style=display:flex><span>cumulative_returns <span style=color:#f92672>=</span> data[<span style=color:#e6db74>&#39;Close&#39;</span>] <span style=color:#f92672>/</span> data[<span style=color:#e6db74>&#39;Close&#39;</span>]<span style=color:#f92672>.</span>iloc[<span style=color:#ae81ff>0</span>] <span style=color:#f92672>-</span> <span style=color:#ae81ff>1</span></span></span></code></pre></div><p><strong>로그 수익률의 누적</strong>:</p>$$r_{cumulative} = \sum_{t=1}^{n} r_t$$<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-python data-lang=python><span style=display:flex><span>cumulative_log_returns <span style=color:#f92672>=</span> log_returns<span style=color:#f92672>.</span>cumsum()
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># 단순 수익률로 변환</span>
</span></span><span style=display:flex><span>cumulative_simple_from_log <span style=color:#f92672>=</span> np<span style=color:#f92672>.</span>exp(cumulative_log_returns) <span style=color:#f92672>-</span> <span style=color:#ae81ff>1</span></span></span></code></pre></div><h2 id=36-벤치마크-비교>3.6 벤치마크 비교<a class=anchor href=#36-%eb%b2%a4%ec%b9%98%eb%a7%88%ed%81%ac-%eb%b9%84%ea%b5%90>#</a></h2><h3 id=벤치마크란>벤치마크란?<a class=anchor href=#%eb%b2%a4%ec%b9%98%eb%a7%88%ed%81%ac%eb%9e%80>#</a></h3><p>**벤치마크(Benchmark)**는 전략 성과를 평가하기 위한 비교 기준입니다.</p><p>일반적인 벤치마크:</p><ul><li><strong>S&amp;P 500 (SPY)</strong>: 미국 대형주</li><li><strong>Nasdaq 100 (QQQ)</strong>: 미국 기술주</li><li><strong>Russell 2000 (IWM)</strong>: 미국 소형주</li><li><strong>국채 ETF (TLT)</strong>: 채권</li><li><strong>개별 종목</strong>: 해당 종목의 Buy & Hold</li></ul><h3 id=초과-수익률-excess-returns>초과 수익률 (Excess Returns)<a class=anchor href=#%ec%b4%88%ea%b3%bc-%ec%88%98%ec%9d%b5%eb%a5%a0-excess-returns>#</a></h3><p>전략의 실제 가치는 <strong>벤치마크 대비 초과 수익률</strong>로 측정됩니다.</p>$$\text{Excess Return} = R_{strategy} - R_{benchmark}$$<h2 id=37-실습-데이터-전처리-파이프라인>3.7 실습: 데이터 전처리 파이프라인<a class=anchor href=#37-%ec%8b%a4%ec%8a%b5-%eb%8d%b0%ec%9d%b4%ed%84%b0-%ec%a0%84%ec%b2%98%eb%a6%ac-%ed%8c%8c%ec%9d%b4%ed%94%84%eb%9d%bc%ec%9d%b8>#</a></h2><p>이제 완전한 데이터 전처리 파이프라인을 실행해봅시다.</p><h3 id=코드-실행>코드 실행<a class=anchor href=#%ec%bd%94%eb%93%9c-%ec%8b%a4%ed%96%89>#</a></h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-bash data-lang=bash><span style=display:flex><span>cd codes
</span></span><span style=display:flex><span>uv run chapter03/01_data_preprocessing.py</span></span></code></pre></div><h3 id=실행-결과-분석>실행 결과 분석<a class=anchor href=#%ec%8b%a4%ed%96%89-%ea%b2%b0%ea%b3%bc-%eb%b6%84%ec%84%9d>#</a></h3><p>스크립트를 실행한 결과입니다:</p><pre tabindex=0><code>==========================================
Chapter 3: 데이터 전처리와 수익률
==========================================

=== 원시 데이터 로드 ===
데이터 기간: 2021-02-08 ~ 2026-02-04
총 데이터 포인트: 1254개

==========================================
=== 데이터 품질 분석 ===
==========================================
결측치:
Open      :   0
High      :   0
Low       :   0
Close     :   0
Volume    :   0
Dividends :   0
Stock Splits:   0

중복 날짜: 0개
시간 순 정렬: ✓
평균 거래일 간격: 1 days 08:58:42

==========================================
=== 가격 논리 검증 ===
==========================================
High &gt;= Close: ✓
High &gt;= Open: ✓
Low &lt;= Close: ✓
Low &lt;= Open: ✓
High &gt;= Low: ✓
Volume &gt;= 0: ✓
전체 검증: 통과 ✓

==========================================
=== 이상치 탐지 (Z-Score) ===
==========================================
발견된 이상치: 14개
이상치 날짜 (처음 5개):
2021-03-01: +0.0539 (+5.39%)
2022-01-28: +0.0698 (+6.98%)
2022-05-05: -0.0557 (-5.57%)
2022-05-11: -0.0518 (-5.18%)
2022-05-18: -0.0564 (-5.64%)

==========================================
=== 수익률 계산 ===
==========================================
단순 수익률:
- 평균: 0.0007 (0.07%)
- 표준편차: 0.0174 (1.74%)
- 최대: +0.1533 (+15.33%)
- 최소: -0.0925 (-9.25%)

로그 수익률:
- 평균: 0.0006 (0.06%)
- 표준편차: 0.0174 (1.74%)
- 최대: +0.1426 (+14.26%)
- 최소: -0.0970 (-9.70%)

누적 수익률:
- 단순 수익률: +1.0715 (+107.15%)
- 로그 수익률: +1.0715 (+107.15%)

==========================================
=== 벤치마크 비교 (vs SPY) ===
==========================================
AAPL 수익률: +107.15%
SPY 수익률: +89.15%
초과 수익률: +17.99%</code></pre><p><img src=/images/chapter03/data_preprocessing.png alt="데이터 전처리 분석"></p><h3 id=차트-해석>차트 해석<a class=anchor href=#%ec%b0%a8%ed%8a%b8-%ed%95%b4%ec%84%9d>#</a></h3><p>생성된 차트는 6개의 서브플롯으로 구성되어 있습니다:</p><h4 id=1-aapl-가격-추세-좌상단>1. AAPL 가격 추세 (좌상단)<a class=anchor href=#1-aapl-%ea%b0%80%ea%b2%a9-%ec%b6%94%ec%84%b8-%ec%a2%8c%ec%83%81%eb%8b%a8>#</a></h4><ul><li>5년간 $113 → $234로 약 2배 상승</li><li>2022년 하반기와 2024년 말 두 차례 큰 조정 구간</li><li>전반적으로 우상향 추세 유지</li></ul><h4 id=2-단순-수익률-분포-우상단>2. 단순 수익률 분포 (우상단)<a class=anchor href=#2-%eb%8b%a8%ec%88%9c-%ec%88%98%ec%9d%b5%eb%a5%a0-%eb%b6%84%ed%8f%ac-%ec%9a%b0%ec%83%81%eb%8b%a8>#</a></h4><ul><li><strong>정규분포에 가까운 형태</strong>: 대부분의 일일 수익률은 ±2% 이내</li><li><strong>평균 0.07%</strong>: 약간의 양의 편향 (장기 상승 추세 반영)</li><li><strong>빨간 선 (평균선)</strong>: 0에 가까움</li><li><strong>긴 꼬리</strong>: 극단적 수익률(±10% 이상)도 존재</li></ul><h4 id=3-로그-수익률-분포-좌중단>3. 로그 수익률 분포 (좌중단)<a class=anchor href=#3-%eb%a1%9c%ea%b7%b8-%ec%88%98%ec%9d%b5%eb%a5%a0-%eb%b6%84%ed%8f%ac-%ec%a2%8c%ec%a4%91%eb%8b%a8>#</a></h4><ul><li>단순 수익률과 거의 동일한 분포</li><li>일일 수익률이 작을 때는 두 수익률의 차이가 미미</li><li><strong>대칭성이 더 좋음</strong>: 평균 주변으로 더 균등한 분포</li></ul><h4 id=4-누적-수익률-비교-우중단>4. 누적 수익률 비교 (우중단)<a class=anchor href=#4-%eb%88%84%ec%a0%81-%ec%88%98%ec%9d%b5%eb%a5%a0-%eb%b9%84%ea%b5%90-%ec%9a%b0%ec%a4%91%eb%8b%a8>#</a></h4><ul><li><strong>보라색 선 (단순 수익률)</strong>: 복리 효과로 계산</li><li><strong>주황색 점선 (로그 수익률)</strong>: 두 선이 거의 일치</li><li><strong>핵심 인사이트</strong>: 일일 수익률 기준에서는 두 방법이 동일한 결과</li><li>최종 누적 수익률: +107.15%</li></ul><h4 id=5-aapl-vs-spy-비교-좌하단>5. AAPL vs SPY 비교 (좌하단)<a class=anchor href=#5-aapl-vs-spy-%eb%b9%84%ea%b5%90-%ec%a2%8c%ed%95%98%eb%8b%a8>#</a></h4><ul><li><strong>AAPL (파란색)</strong>: 더 높은 수익률과 변동성</li><li><strong>SPY (주황색)</strong>: 더 안정적이지만 낮은 수익률</li><li>정규화된 비교에서 AAPL이 SPY를 약 18% 초과 달성</li><li><strong>2022년 조정</strong>: 두 자산 모두 하락했지만 AAPL이 더 크게 하락</li></ul><h4 id=6-일일-수익률-시계열-우하단>6. 일일 수익률 시계열 (우하단)<a class=anchor href=#6-%ec%9d%bc%ec%9d%bc-%ec%88%98%ec%9d%b5%eb%a5%a0-%ec%8b%9c%ea%b3%84%ec%97%b4-%ec%9a%b0%ed%95%98%eb%8b%a8>#</a></h4><ul><li>시간에 따른 변동성 변화 관찰</li><li><strong>2022년 중반</strong>: 변동성 증가 (±5% 이상 움직임 빈번)</li><li><strong>2023년</strong>: 변동성 감소 (안정적인 구간)</li><li><strong>최근</strong>: 다시 변동성 증가 추세</li><li><strong>평균선 (빨간색)</strong>: 장기 평균 수익률 +0.07%</li></ul><h3 id=데이터-품질-인사이트>데이터 품질 인사이트<a class=anchor href=#%eb%8d%b0%ec%9d%b4%ed%84%b0-%ed%92%88%ec%a7%88-%ec%9d%b8%ec%82%ac%ec%9d%b4%ed%8a%b8>#</a></h3><p><strong>결측치 없음 (0개)</strong>:</p><ul><li>yfinance에서 다운로드한 데이터는 품질이 우수합니다</li><li>추가 전처리가 거의 필요 없습니다</li></ul><p><strong>이상치 14개 발견</strong>:</p><ul><li>전체 1254개 중 14개 (1.1%)</li><li>대부분 실제 시장 이벤트 (실적 발표, 시장 폭락)</li><li><strong>중요</strong>: 이러한 이상치를 제거하지 않았습니다<ul><li>이유: 실제 트레이딩에서도 발생할 수 있는 상황</li><li>백테스팅은 현실을 반영해야 함</li></ul></li></ul><p><strong>단순 vs 로그 수익률</strong>:</p><ul><li>일일 수익률에서는 거의 차이가 없음</li><li>극단적 수익률에서만 미미한 차이 발생</li><li>백테스팅에서는 <strong>단순 수익률</strong> 선호 (직관적)</li><li>통계 분석에서는 <strong>로그 수익률</strong> 선호 (시간 가산성)</li></ul><p><strong>벤치마크 대비 성과와 수익성 교훈</strong>:</p><pre tabindex=0><code>AAPL: +107.15% (변동성: 1.74%)
SPY:  +89.15%  (변동성: ?)
초과 수익: +17.99%</code></pre><p><strong>⚠️ 수익성 함정 주의</strong>: 이 결과를 보고 &ldquo;AAPL이 SPY보다 17.99% 더 좋다!&ldquo;라고 결론내리면 안 됩니다!</p><p><strong>수익성 분석 체크리스트</strong>:</p><ol><li><p><strong>절대 수익률만 보지 마세요</strong> ❌</p><ul><li>AAPL: +107% 좋아 보임</li><li>하지만 SPY: +89%도 충분히 좋음</li><li>차이는 18%p인데 이것이 의미 있는 차이인가?</li></ul></li><li><p><strong>리스크를 고려하세요</strong> ✅</p><ul><li>AAPL 변동성: 1.74% (일일)</li><li>SPY는 아마도 ~1.0% (더 낮음)</li><li>AAPL은 <strong>74% 더 높은 변동성</strong>을 가짐</li><li>높은 변동성 = 더 큰 손실 가능성</li></ul></li><li><p><strong>리스크 조정 수익률이 진실</strong> ✅</p><ul><li>같은 리스크를 감수했을 때 어느 것이 더 나은가?</li><li>Sharpe Ratio = (수익률 - 무위험 수익률) / 변동성</li><li>다음 챕터들에서 이를 계산할 예정</li></ul></li><li><p><strong>실용적 의미</strong> ✅</p><ul><li>만약 당신이 10% 하락을 견딜 수 없다면:<ul><li>AAPL 최대 하락: -9.25% (하루에!)</li><li>이런 변동성을 견딜 수 있습니까?</li></ul></li><li>만약 못 견디면, 낮은 수익률이라도 SPY가 더 나은 선택</li></ul></li></ol><p><strong>진정한 수익성 질문</strong>:</p><ul><li>❌ &ldquo;어느 것이 더 많이 벌었나?&rdquo; (절대 수익)</li><li>✅ &ldquo;같은 리스크로 어느 것이 더 효율적인가?&rdquo; (리스크 조정 수익)</li><li>✅ &ldquo;내가 감당할 수 있는 리스크 범위에서 최선의 선택은?&rdquo; (개인화)</li></ul><p><strong>핵심 교훈</strong>: 백테스팅에서 &ldquo;초과 수익률"을 발견했다면, 항상 &ldquo;그 초과 수익이 추가 리스크를 감수할 가치가 있는가?&ldquo;를 물어야 합니다. 다음 챕터에서 리스크 조정 수익률(Sharpe Ratio)로 제대로 비교할 예정입니다.</p><p>이 스크립트는 다음을 수행합니다:</p><ol><li><strong>원시 데이터 로드</strong>: Chapter 2에서 다운로드한 AAPL 데이터</li><li><strong>데이터 품질 분석</strong>: 결측치, 중복, 이상치 확인</li><li><strong>전처리 실행</strong>: 결측치 처리, 정합성 검증</li><li><strong>수익률 계산</strong>: 단순 및 로그 수익률</li><li><strong>벤치마크 비교</strong>: S&amp;P 500 (SPY) 대비 성과</li><li><strong>시각화</strong>: 전처리 전후 비교, 수익률 분포, 벤치마크 비교</li></ol><h2 id=38-다음-단계>3.8 다음 단계<a class=anchor href=#38-%eb%8b%a4%ec%9d%8c-%eb%8b%a8%ea%b3%84>#</a></h2><h3 id=이-챕터에서-배운-것>이 챕터에서 배운 것<a class=anchor href=#%ec%9d%b4-%ec%b1%95%ed%84%b0%ec%97%90%ec%84%9c-%eb%b0%b0%ec%9a%b4-%ea%b2%83>#</a></h3><p>✅ <strong>결측치 처리</strong>: Forward fill, 삭제, 보간 방법
✅ <strong>이상치 탐지</strong>: Z-Score, IQR 방법
✅ <strong>데이터 검증</strong>: 가격 논리, 시계열 연속성
✅ <strong>수익률 계산</strong>: 단순 vs. 로그 수익률
✅ <strong>벤치마크 비교</strong>: 초과 수익률, 상대 성과
✅ <strong>전처리 파이프라인</strong>: 완전한 데이터 정제 프로세스</p><h3 id=실습-과제>실습 과제<a class=anchor href=#%ec%8b%a4%ec%8a%b5-%ea%b3%bc%ec%a0%9c>#</a></h3><ol><li><p><strong>다른 종목 전처리</strong>: Tesla (TSLA) 또는 Microsoft (MSFT) 데이터를 전처리하고 AAPL과 비교해보세요.</p></li><li><p><strong>이상치 영향 분석</strong>: 이상치를 포함한 경우와 제외한 경우의 통계를 비교해보세요.</p></li><li><p><strong>다양한 벤치마크</strong>: SPY 외에 QQQ, IWM 등 다른 벤치마크와 비교해보세요.</p></li><li><p><strong>수익률 변환</strong>: 단순 수익률과 로그 수익률의 차이가 큰 경우를 찾아보세요.</p></li></ol><h3 id=다음-챕터-미리보기>다음 챕터 미리보기<a class=anchor href=#%eb%8b%a4%ec%9d%8c-%ec%b1%95%ed%84%b0-%eb%af%b8%eb%a6%ac%eb%b3%b4%ea%b8%b0>#</a></h3><p><strong>Chapter 4: Backtrader 프레임워크 기초</strong>에서는:</p><ul><li>Backtrader 아키텍처 이해 (Cerebro, Strategy, Data Feeds)</li><li>첫 번째 전략: Buy & Hold 구현</li><li>주문 실행과 포지션 관리</li><li>기본 성과 분석 (Analyzers 사용)</li><li>실전 백테스팅 시작</li></ul><hr><p><strong>💡 핵심 메시지: 수익성과 데이터 전처리</strong></p><p>깨끗한 데이터는 신뢰할 수 있는 백테스팅의 기초입니다. 하지만 데이터를 &ldquo;너무 깨끗하게&rdquo; 만들면 위험합니다!</p><p><strong>실전 수익성에 영향을 주는 데이터 처리 결정</strong>:</p><ol><li><p><strong>이상치를 제거하면?</strong> ❌</p><ul><li>백테스트: +150% (이상적인 결과)</li><li>실전: -30% (극단적 상황에서 전략 붕괴)</li><li><strong>교훈</strong>: 이상치는 리스크 테스트의 핵심</li></ul></li><li><p><strong>결측치를 보간으로 채우면?</strong> ⚠️</p><ul><li>백테스트: 부드러운 수익 곡선</li><li>실전: 거래 불가능한 시점에 진입 시도 → 실패</li><li><strong>교훈</strong>: Forward fill이 더 현실적</li></ul></li><li><p><strong>벤치마크를 안 보면?</strong> ❌</p><ul><li>전략: +100% (와! 대박!)</li><li>벤치마크: +150% (그냥 사서 보유가 나았음)</li><li><strong>교훈</strong>: 절대 수익이 아닌 상대 성과가 중요</li></ul></li><li><p><strong>변동성을 무시하면?</strong> ❌</p><ul><li>높은 수익 = 좋은 전략? No!</li><li>높은 수익 + 낮은 변동성 = 좋은 전략 Yes!</li><li><strong>교훈</strong>: 리스크 조정 수익률이 진짜 지표</li></ul></li></ol><p><strong>실용적 조언</strong>: 데이터 전처리는 &ldquo;이상적인 데이터"를 만드는 것이 아니라 &ldquo;현실을 정확히 반영하는 데이터"를 만드는 것입니다. 극단적 상황, 결측치, 변동성을 제거하면 백테스트는 좋아 보이지만 실전에서 실패합니다.</p><p>다음 챕터에서는 드디어 Backtrader를 사용하여 실제 트레이딩 전략을 구현해봅시다!</p></article><footer class=book-footer><div class="flex flex-wrap justify-between"><div></div><div></div></div><div class="flex flex-wrap justify-between"><span><a href=/intro-to-backtesting/docs/chapter02/ class="flex align-center"><img src=/intro-to-backtesting/icons/backward.svg class=book-icon alt=Backward>
<span>Chapter 2: 금융 데이터 다운로드와 이해</span>
</a></span><span><a href=/intro-to-backtesting/docs/chapter04/ class="flex align-center"><span>Chapter 4: Backtrader 프레임워크 기초</span>
<img src=/intro-to-backtesting/icons/forward.svg class=book-icon alt=Forward></a></span></div><script>(function(){document.querySelectorAll("pre:has(code)").forEach(e=>{e.addEventListener("click",e.focus),e.addEventListener("copy",function(t){if(t.preventDefault(),navigator.clipboard){const t=window.getSelection().toString()||e.textContent;navigator.clipboard.writeText(t)}})})})()</script></footer><label for=menu-control class="hidden book-menu-overlay"></label></div><aside class=book-toc><div class=book-toc-content><nav id=TableOfContents><ul><li><a href=#31-데이터-전처리의-필요성>3.1 데이터 전처리의 필요성</a><ul><li><a href=#왜-전처리가-중요한가>왜 전처리가 중요한가?</a></li></ul></li><li><a href=#32-결측치-처리>3.2 결측치 처리</a><ul><li><a href=#결측치-확인>결측치 확인</a></li><li><a href=#결측치-처리-방법>결측치 처리 방법</a></li><li><a href=#권장-사항>권장 사항</a></li></ul></li><li><a href=#33-이상치-탐지>3.3 이상치 탐지</a><ul><li><a href=#이상치란>이상치란?</a></li><li><a href=#이상치-탐지-방법>이상치 탐지 방법</a></li></ul></li><li><a href=#34-데이터-정합성-검증>3.4 데이터 정합성 검증</a><ul><li><a href=#가격-논리-검증>가격 논리 검증</a></li></ul></li><li><a href=#35-수익률-계산>3.5 수익률 계산</a><ul><li><a href=#단순-수익률-simple-returns>단순 수익률 (Simple Returns)</a></li><li><a href=#로그-수익률-log-returns>로그 수익률 (Log Returns)</a></li><li><a href=#단순-vs-로그-수익률-비교>단순 vs. 로그 수익률 비교</a></li><li><a href=#누적-수익률-계산>누적 수익률 계산</a></li></ul></li><li><a href=#36-벤치마크-비교>3.6 벤치마크 비교</a><ul><li><a href=#벤치마크란>벤치마크란?</a></li><li><a href=#초과-수익률-excess-returns>초과 수익률 (Excess Returns)</a></li></ul></li><li><a href=#37-실습-데이터-전처리-파이프라인>3.7 실습: 데이터 전처리 파이프라인</a><ul><li><a href=#코드-실행>코드 실행</a></li><li><a href=#실행-결과-분석>실행 결과 분석</a></li><li><a href=#차트-해석>차트 해석</a></li><li><a href=#데이터-품질-인사이트>데이터 품질 인사이트</a></li></ul></li><li><a href=#38-다음-단계>3.8 다음 단계</a><ul><li><a href=#이-챕터에서-배운-것>이 챕터에서 배운 것</a></li><li><a href=#실습-과제>실습 과제</a></li><li><a href=#다음-챕터-미리보기>다음 챕터 미리보기</a></li></ul></li></ul></nav></div></aside></main></body></html>