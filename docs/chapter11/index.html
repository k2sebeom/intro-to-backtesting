<!doctype html><html lang=en-us dir=ltr><head><meta charset=UTF-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content='Chapter 11: 포트폴리오 구성과 분산투자# “계란을 한 바구니에 담지 마라"는 투자의 가장 기본적인 원칙입니다. 이번 챕터에서는 여러 자산에 분산투자하여 위험을 줄이고 안정적인 수익을 추구하는 포트폴리오 구성 방법을 배웁니다.
11.1 분산투자의 원리# 11.1.1 왜 분산투자가 필요한가?# 단일 자산의 위험:
AAPL만 투자 → AAPL 하락 시 전체 손실포트폴리오의 위험 감소:
AAPL + MSFT + GOOGL + AMZN → 한 종목 하락해도 다른 종목이 보완수학적 원리: 상관관계가 낮은 자산 결합
$$ \sigma_p^2 = \sum_{i=1}^{n} w_i^2 \sigma_i^2 + \sum_{i=1}^{n}\sum_{j\neq i}^{n} w_i w_j \rho_{ij} \sigma_i \sigma_j $$여기서:
'><meta name=theme-color media="(prefers-color-scheme: light)" content="#ffffff"><meta name=theme-color media="(prefers-color-scheme: dark)" content="#343a40"><meta name=color-scheme content="light dark"><meta property="og:url" content="https://k2sebeom.github.io/intro-to-backtesting/docs/chapter11/"><meta property="og:site_name" content="파이썬으로 배우는 백테스팅 입문"><meta property="og:title" content="Chapter 11: 포트폴리오 구성과 분산투자"><meta property="og:description" content='Chapter 11: 포트폴리오 구성과 분산투자# “계란을 한 바구니에 담지 마라"는 투자의 가장 기본적인 원칙입니다. 이번 챕터에서는 여러 자산에 분산투자하여 위험을 줄이고 안정적인 수익을 추구하는 포트폴리오 구성 방법을 배웁니다.
11.1 분산투자의 원리# 11.1.1 왜 분산투자가 필요한가?# 단일 자산의 위험:
AAPL만 투자 → AAPL 하락 시 전체 손실포트폴리오의 위험 감소:
AAPL + MSFT + GOOGL + AMZN → 한 종목 하락해도 다른 종목이 보완수학적 원리: 상관관계가 낮은 자산 결합
$$ \sigma_p^2 = \sum_{i=1}^{n} w_i^2 \sigma_i^2 + \sum_{i=1}^{n}\sum_{j\neq i}^{n} w_i w_j \rho_{ij} \sigma_i \sigma_j $$여기서:'><meta property="og:locale" content="en_us"><meta property="og:type" content="article"><meta property="article:section" content="docs"><meta property="article:modified_time" content="2026-02-05T03:00:24+00:00"><meta itemprop=name content="Chapter 11: 포트폴리오 구성과 분산투자"><meta itemprop=description content='Chapter 11: 포트폴리오 구성과 분산투자# “계란을 한 바구니에 담지 마라"는 투자의 가장 기본적인 원칙입니다. 이번 챕터에서는 여러 자산에 분산투자하여 위험을 줄이고 안정적인 수익을 추구하는 포트폴리오 구성 방법을 배웁니다.
11.1 분산투자의 원리# 11.1.1 왜 분산투자가 필요한가?# 단일 자산의 위험:
AAPL만 투자 → AAPL 하락 시 전체 손실포트폴리오의 위험 감소:
AAPL + MSFT + GOOGL + AMZN → 한 종목 하락해도 다른 종목이 보완수학적 원리: 상관관계가 낮은 자산 결합
$$ \sigma_p^2 = \sum_{i=1}^{n} w_i^2 \sigma_i^2 + \sum_{i=1}^{n}\sum_{j\neq i}^{n} w_i w_j \rho_{ij} \sigma_i \sigma_j $$여기서:'><meta itemprop=dateModified content="2026-02-05T03:00:24+00:00"><meta itemprop=wordCount content="1831"><title>Chapter 11: 포트폴리오 구성과 분산투자 | 파이썬으로 배우는 백테스팅 입문</title><link rel=icon href=/intro-to-backtesting/favicon.png><link rel=manifest href=/intro-to-backtesting/manifest.json><link rel=canonical href=https://k2sebeom.github.io/intro-to-backtesting/docs/chapter11/><link rel=stylesheet href=/intro-to-backtesting/book.min.cc2c524ed250aac81b23d1f4af87344917b325208841feca0968fe450f570575.css integrity="sha256-zCxSTtJQqsgbI9H0r4c0SRezJSCIQf7KCWj+RQ9XBXU=" crossorigin=anonymous><script defer src=/intro-to-backtesting/fuse.min.js></script><script defer src=/intro-to-backtesting/en.search.min.05baa5436ceb0d25fdc88cb36120167f2dcace5f2606a6e63ae01a885e2bbf68.js integrity="sha256-BbqlQ2zrDSX9yIyzYSAWfy3Kzl8mBqbmOuAaiF4rv2g=" crossorigin=anonymous></script><script id=MathJax-script async src=https://cdn.jsdelivr.net/npm/mathjax@4/tex-mml-chtml.js></script><script>MathJax={tex:{displayMath:[["\\[","\\]"],["$$","$$"]],inlineMath:[["\\(","\\)"],["$","$"]]},loader:{load:["ui/safe"]}}</script></head><body dir=ltr class="book-kind-page book-type-docs"><input type=checkbox class="hidden toggle" id=menu-control>
<input type=checkbox class="hidden toggle" id=toc-control><main class="container flex"><aside class=book-menu><div class=book-menu-content><nav><h2 class=book-brand><a class="flex align-center" href=/intro-to-backtesting/><span>파이썬으로 배우는 백테스팅 입문</span></a></h2><div class="book-search hidden"><input id=book-search-input type=text placeholder=Search aria-label=Search maxlength=64 data-hotkeys=s/><div class="book-search-spinner hidden"></div><ul id=book-search-results></ul></div><script>document.querySelector(".book-search").classList.remove("hidden")</script><ul><li><a href=/intro-to-backtesting/docs/chapter01/>Chapter 1: 백테스팅 시작하기</a></li><li><a href=/intro-to-backtesting/docs/chapter02/>Chapter 2: 금융 데이터 다운로드와 이해</a></li><li><a href=/intro-to-backtesting/docs/chapter03/>Chapter 3: 데이터 전처리와 수익률</a></li><li><a href=/intro-to-backtesting/docs/chapter04/>Chapter 4: Backtrader 프레임워크 기초</a></li><li><a href=/intro-to-backtesting/docs/chapter05/>Chapter 5: 이동평균 전략</a></li><li><a href=/intro-to-backtesting/docs/chapter06/>Chapter 6: RSI 및 과매수/과매도 전략</a></li><li><a href=/intro-to-backtesting/docs/chapter07/>Chapter 7: Bollinger Bands 전략</a></li><li><a href=/intro-to-backtesting/docs/chapter08/>Chapter 8: 다중 지표 결합 전략</a></li><li><a href=/intro-to-backtesting/docs/chapter09/>Chapter 9: 포지션 크기 결정</a></li><li><a href=/intro-to-backtesting/docs/chapter10/>Chapter 10: 리스크 관리와 손절매</a></li><li><a href=/intro-to-backtesting/docs/chapter11/ class=active>Chapter 11: 포트폴리오 구성과 분산투자</a></li><li><a href=/intro-to-backtesting/docs/chapter12/>Chapter 12: 성과 지표와 리스크 측정</a></li><li><a href=/intro-to-backtesting/docs/chapter13/>Chapter 13: 백테스트 결과 분석과 시각화</a></li><li><a href=/intro-to-backtesting/docs/chapter14/>Chapter 14: 과최적화 방지와 검증</a></li><li><a href=/intro-to-backtesting/docs/chapter15/>Chapter 15: 머신러닝 기반 전략 (1)</a></li><li><a href=/intro-to-backtesting/docs/chapter16/>Chapter 16: 머신러닝 기반 전략 (2)</a></li><li><a href=/intro-to-backtesting/docs/chapter17/>Chapter 17: 실전 트레이딩 고려사항</a></li><li><a href=/intro-to-backtesting/docs/chapter18/>Chapter 18: 완전한 전략 개발 프로세스</a></li></ul></nav><script>(function(){var e=document.querySelector("aside .book-menu-content");addEventListener("beforeunload",function(){localStorage.setItem("menu.scrollTop",e.scrollTop)}),e.scrollTop=localStorage.getItem("menu.scrollTop")})()</script></div></aside><div class=book-page><header class="book-header hidden"><div class="flex align-center justify-between"><label for=menu-control><img src=/intro-to-backtesting/icons/menu.svg class=book-icon alt=Menu></label><h3>Chapter 11: 포트폴리오 구성과 분산투자</h3><label for=toc-control><img src=/intro-to-backtesting/icons/toc.svg class=book-icon alt="Table of Contents"></label></div><aside class=hidden><nav id=TableOfContents><ul><li><a href=#111-분산투자의-원리>11.1 분산투자의 원리</a><ul><li><a href=#1111-왜-분산투자가-필요한가>11.1.1 왜 분산투자가 필요한가?</a></li><li><a href=#1112-상관관계의-중요성>11.1.2 상관관계의 중요성</a></li><li><a href=#1113-최적-분산-개수>11.1.3 최적 분산 개수</a></li></ul></li><li><a href=#112-포트폴리오-배분-전략>11.2 포트폴리오 배분 전략</a><ul><li><a href=#1121-균등-비중-equal-weight>11.2.1 균등 비중 (Equal Weight)</a></li><li><a href=#1122-시가총액-비중-market-cap-weight>11.2.2 시가총액 비중 (Market Cap Weight)</a></li><li><a href=#1123-역변동성-비중-inverse-volatility>11.2.3 역변동성 비중 (Inverse Volatility)</a></li><li><a href=#1124-리스크-패리티-risk-parity>11.2.4 리스크 패리티 (Risk Parity)</a></li><li><a href=#1125-평균-분산-최적화-mean-variance-optimization>11.2.5 평균-분산 최적화 (Mean-Variance Optimization)</a></li></ul></li><li><a href=#113-리밸런싱-rebalancing>11.3 리밸런싱 (Rebalancing)</a><ul><li><a href=#1131-리밸런싱의-필요성>11.3.1 리밸런싱의 필요성</a></li><li><a href=#1132-리밸런싱-방법>11.3.2 리밸런싱 방법</a></li><li><a href=#1133-리밸런싱의-효과>11.3.3 리밸런싱의 효과</a></li></ul></li><li><a href=#114-backtrader에서-다중-자산-백테스팅>11.4 Backtrader에서 다중 자산 백테스팅</a><ul><li><a href=#1141-여러-데이터-피드-추가>11.4.1 여러 데이터 피드 추가</a></li><li><a href=#1142-포트폴리오-전략-구현>11.4.2 포트폴리오 전략 구현</a></li></ul></li><li><a href=#115-실전-구현>11.5 실전 구현</a></li><li><a href=#116-기대-결과>11.6 기대 결과</a></li><li><a href=#117-포트폴리오-구성-원칙>11.7 포트폴리오 구성 원칙</a><ul><li><a href=#1171-자산-선택>11.7.1 자산 선택</a></li><li><a href=#1172-비중-결정>11.7.2 비중 결정</a></li><li><a href=#1173-리밸런싱-규칙>11.7.3 리밸런싱 규칙</a></li></ul></li><li><a href=#118-고급-포트폴리오-기법>11.8 고급 포트폴리오 기법</a><ul><li><a href=#1181-팩터-투자-factor-investing>11.8.1 팩터 투자 (Factor Investing)</a></li><li><a href=#1182-all-weather-portfolio-레이-달리오>11.8.2 All Weather Portfolio (레이 달리오)</a></li><li><a href=#1183-6040-포트폴리오-전통적>11.8.3 60/40 포트폴리오 (전통적)</a></li></ul></li><li><a href=#119-실전-적용-시-주의사항>11.9 실전 적용 시 주의사항</a><ul><li><a href=#1191-과거-성과-맹신-금지>11.9.1 과거 성과 맹신 금지</a></li><li><a href=#1192-극단적-비중-회피>11.9.2 극단적 비중 회피</a></li><li><a href=#1193-실시간-모니터링>11.9.3 실시간 모니터링</a></li></ul></li><li><a href=#1110-개선-방향>11.10 개선 방향</a></li><li><a href=#다음-단계>다음 단계</a></li><li><a href=#1111-실행-결과>11.11 실행 결과</a><ul><li><a href=#차트-해석>차트 해석</a></li><li><a href=#핵심-인사이트>핵심 인사이트</a></li><li><a href=#그렇다면-분산투자는-필요-없는가>그렇다면 분산투자는 필요 없는가?</a></li><li><a href=#올바른-분산투자-방법>올바른 분산투자 방법</a></li><li><a href=#실전-적용-가이드>실전 적용 가이드</a></li></ul></li></ul></nav></aside></header><article class="markdown book-article"><h1 id=chapter-11-포트폴리오-구성과-분산투자>Chapter 11: 포트폴리오 구성과 분산투자<a class=anchor href=#chapter-11-%ed%8f%ac%ed%8a%b8%ed%8f%b4%eb%a6%ac%ec%98%a4-%ea%b5%ac%ec%84%b1%ea%b3%bc-%eb%b6%84%ec%82%b0%ed%88%ac%ec%9e%90>#</a></h1><p>&ldquo;계란을 한 바구니에 담지 마라"는 투자의 가장 기본적인 원칙입니다. 이번 챕터에서는 여러 자산에 분산투자하여 위험을 줄이고 안정적인 수익을 추구하는 포트폴리오 구성 방법을 배웁니다.</p><h2 id=111-분산투자의-원리>11.1 분산투자의 원리<a class=anchor href=#111-%eb%b6%84%ec%82%b0%ed%88%ac%ec%9e%90%ec%9d%98-%ec%9b%90%eb%a6%ac>#</a></h2><h3 id=1111-왜-분산투자가-필요한가>11.1.1 왜 분산투자가 필요한가?<a class=anchor href=#1111-%ec%99%9c-%eb%b6%84%ec%82%b0%ed%88%ac%ec%9e%90%ea%b0%80-%ed%95%84%ec%9a%94%ed%95%9c%ea%b0%80>#</a></h3><p><strong>단일 자산의 위험</strong>:</p><pre tabindex=0><code>AAPL만 투자 → AAPL 하락 시 전체 손실</code></pre><p><strong>포트폴리오의 위험 감소</strong>:</p><pre tabindex=0><code>AAPL + MSFT + GOOGL + AMZN
→ 한 종목 하락해도 다른 종목이 보완</code></pre><p><strong>수학적 원리</strong>: 상관관계가 낮은 자산 결합</p>$$
\sigma_p^2 = \sum_{i=1}^{n} w_i^2 \sigma_i^2 + \sum_{i=1}^{n}\sum_{j\neq i}^{n} w_i w_j \rho_{ij} \sigma_i \sigma_j
$$<p>여기서:</p><ul><li>$\sigma_p$: 포트폴리오 표준편차 (위험)</li><li>$w_i$: 자산 $i$의 비중</li><li>$\sigma_i$: 자산 $i$의 표준편차</li><li>$\rho_{ij}$: 자산 $i$와 $j$의 상관계수</li></ul><h3 id=1112-상관관계의-중요성>11.1.2 상관관계의 중요성<a class=anchor href=#1112-%ec%83%81%ea%b4%80%ea%b4%80%ea%b3%84%ec%9d%98-%ec%a4%91%ec%9a%94%ec%84%b1>#</a></h3><p><strong>상관계수 ($\rho$)의 의미</strong>:</p><ul><li>$\rho = +1$: 완전 양의 상관 (함께 움직임) → 분산 효과 없음</li><li>$\rho = 0$: 무상관 (독립적) → 분산 효과 있음</li><li>$\rho = -1$: 완전 음의 상관 (반대로 움직임) → 분산 효과 최대</li></ul><p><strong>예시</strong>:</p><pre tabindex=0><code>AAPL &amp; MSFT: ρ ≈ 0.7 (같은 기술주 섹터)
AAPL &amp; GOLD: ρ ≈ 0.0 (상관 낮음)
주식 &amp; 채권: ρ ≈ -0.3 (음의 상관)</code></pre><h3 id=1113-최적-분산-개수>11.1.3 최적 분산 개수<a class=anchor href=#1113-%ec%b5%9c%ec%a0%81-%eb%b6%84%ec%82%b0-%ea%b0%9c%ec%88%98>#</a></h3><p><strong>Naive Diversification</strong>: 단순 균등 분산</p>$$
w_i = \frac{1}{N}
$$<p><strong>실증 연구 결과</strong>:</p><ul><li>15-20개 종목: 대부분의 비체계적 위험 제거</li><li>30개 이상: 추가 분산 효과 미미</li><li>너무 많으면: 관리 복잡, 수수료 증가</li></ul><h2 id=112-포트폴리오-배분-전략>11.2 포트폴리오 배분 전략<a class=anchor href=#112-%ed%8f%ac%ed%8a%b8%ed%8f%b4%eb%a6%ac%ec%98%a4-%eb%b0%b0%eb%b6%84-%ec%a0%84%eb%9e%b5>#</a></h2><h3 id=1121-균등-비중-equal-weight>11.2.1 균등 비중 (Equal Weight)<a class=anchor href=#1121-%ea%b7%a0%eb%93%b1-%eb%b9%84%ec%a4%91-equal-weight>#</a></h3><p><strong>방법</strong>: 모든 자산에 동일한 비중 투자</p>$$
w_i = \frac{1}{N}
$$<p><strong>장점</strong>:</p><ul><li>단순하고 명확</li><li>시가총액 편향 없음</li><li>소형주 노출 증가</li></ul><p><strong>단점</strong>:</p><ul><li>리밸런싱 빈번</li><li>수수료 증가</li><li>위험 자산에 과다 노출 가능</li></ul><h3 id=1122-시가총액-비중-market-cap-weight>11.2.2 시가총액 비중 (Market Cap Weight)<a class=anchor href=#1122-%ec%8b%9c%ea%b0%80%ec%b4%9d%ec%95%a1-%eb%b9%84%ec%a4%91-market-cap-weight>#</a></h3><p><strong>방법</strong>: 시가총액에 비례하여 투자</p>$$
w_i = \frac{\text{Market Cap}_i}{\sum_{j=1}^{N} \text{Market Cap}_j}
$$<p><strong>장점</strong>:</p><ul><li>시장 대표성</li><li>리밸런싱 적음</li><li>지수 추종</li></ul><p><strong>단점</strong>:</p><ul><li>대형주 편향</li><li>버블 위험</li><li>소형주 기회 놓침</li></ul><h3 id=1123-역변동성-비중-inverse-volatility>11.2.3 역변동성 비중 (Inverse Volatility)<a class=anchor href=#1123-%ec%97%ad%eb%b3%80%eb%8f%99%ec%84%b1-%eb%b9%84%ec%a4%91-inverse-volatility>#</a></h3><p><strong>방법</strong>: 변동성에 반비례하여 투자</p>$$
w_i = \frac{1/\sigma_i}{\sum_{j=1}^{N} 1/\sigma_j}
$$<p><strong>장점</strong>:</p><ul><li>위험 균등 배분</li><li>안정성 증가</li><li>변동성 큰 자산 축소</li></ul><p><strong>단점</strong>:</p><ul><li>수익률 희생 가능</li><li>변동성 변화 추적 필요</li></ul><h3 id=1124-리스크-패리티-risk-parity>11.2.4 리스크 패리티 (Risk Parity)<a class=anchor href=#1124-%eb%a6%ac%ec%8a%a4%ed%81%ac-%ed%8c%a8%eb%a6%ac%ed%8b%b0-risk-parity>#</a></h3><p><strong>방법</strong>: 각 자산의 위험 기여도를 동일하게</p><p><strong>위험 기여도 (Risk Contribution)</strong>:</p>$$
RC_i = w_i \times \frac{\partial \sigma_p}{\partial w_i}
$$<p><strong>목표</strong>: $RC_1 = RC_2 = \cdots = RC_N$</p><p><strong>장점</strong>:</p><ul><li>진정한 위험 분산</li><li>상관관계 고려</li><li>균형잡힌 포트폴리오</li></ul><p><strong>단점</strong>:</p><ul><li>계산 복잡</li><li>최적화 필요</li></ul><h3 id=1125-평균-분산-최적화-mean-variance-optimization>11.2.5 평균-분산 최적화 (Mean-Variance Optimization)<a class=anchor href=#1125-%ed%8f%89%ea%b7%a0-%eb%b6%84%ec%82%b0-%ec%b5%9c%ec%a0%81%ed%99%94-mean-variance-optimization>#</a></h3><p><strong>Markowitz 모형</strong>: 주어진 위험 수준에서 수익 최대화</p>$$
\max_{w} \quad \mu^T w - \frac{\lambda}{2} w^T \Sigma w
$$<p>제약 조건:</p>$$
\begin{align}
\sum_{i=1}^{N} w_i &= 1 \\
w_i &\geq 0 \quad \forall i
\end{align}
$$<p>여기서:</p><ul><li>$\mu$: 기대 수익률 벡터</li><li>$\Sigma$: 공분산 행렬</li><li>$\lambda$: 위험 회피 계수</li></ul><p><strong>장점</strong>:</p><ul><li>이론적으로 최적</li><li>효율적 프론티어 도출</li></ul><p><strong>단점</strong>:</p><ul><li>과거 데이터 의존</li><li>추정 오차 민감</li><li>극단적 비중 가능</li></ul><h2 id=113-리밸런싱-rebalancing>11.3 리밸런싱 (Rebalancing)<a class=anchor href=#113-%eb%a6%ac%eb%b0%b8%eb%9f%b0%ec%8b%b1-rebalancing>#</a></h2><h3 id=1131-리밸런싱의-필요성>11.3.1 리밸런싱의 필요성<a class=anchor href=#1131-%eb%a6%ac%eb%b0%b8%eb%9f%b0%ec%8b%b1%ec%9d%98-%ed%95%84%ec%9a%94%ec%84%b1>#</a></h3><p><strong>문제</strong>: 시간이 지나면 비중 변화</p><pre tabindex=0><code>초기: AAPL 25%, MSFT 25%, GOOGL 25%, AMZN 25%
1년 후: AAPL 35%, MSFT 20%, GOOGL 30%, AMZN 15%</code></pre><p><strong>목적</strong>:</p><ul><li>목표 비중 유지</li><li>위험 통제</li><li>차익실현 및 손절</li></ul><h3 id=1132-리밸런싱-방법>11.3.2 리밸런싱 방법<a class=anchor href=#1132-%eb%a6%ac%eb%b0%b8%eb%9f%b0%ec%8b%b1-%eb%b0%a9%eb%b2%95>#</a></h3><p><strong>1. 주기적 리밸런싱 (Time-Based)</strong></p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#66d9ef>if</span> month <span style=color:#f92672>==</span> <span style=color:#ae81ff>12</span>:  <span style=color:#75715e># 연 1회</span>
</span></span><span style=display:flex><span>    rebalance_to_target_weights()</span></span></code></pre></div><p><strong>빈도 옵션</strong>:</p><ul><li>월간: 빈번, 수수료 높음</li><li>분기: 균형잡힌 선택</li><li>연간: 수수료 낮음, 편차 클 수 있음</li></ul><p><strong>2. 임계값 기반 리밸런싱 (Threshold-Based)</strong></p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#66d9ef>if</span> abs(current_weight <span style=color:#f92672>-</span> target_weight) <span style=color:#f92672>&gt;</span> <span style=color:#ae81ff>0.05</span>:  <span style=color:#75715e># 5% 편차</span>
</span></span><span style=display:flex><span>    rebalance()</span></span></code></pre></div><p><strong>3. 혼합 방식</strong></p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#75715e># 분기마다 확인하되, 5% 편차 시만 리밸런싱</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>if</span> quarter_end <span style=color:#f92672>and</span> abs(current_weight <span style=color:#f92672>-</span> target_weight) <span style=color:#f92672>&gt;</span> <span style=color:#ae81ff>0.05</span>:
</span></span><span style=display:flex><span>    rebalance()</span></span></code></pre></div><h3 id=1133-리밸런싱의-효과>11.3.3 리밸런싱의 효과<a class=anchor href=#1133-%eb%a6%ac%eb%b0%b8%eb%9f%b0%ec%8b%b1%ec%9d%98-%ed%9a%a8%ea%b3%bc>#</a></h3><p><strong>수익 향상 메커니즘</strong>:</p><ol><li><strong>Buy Low, Sell High</strong>: 하락한 자산 매수, 상승한 자산 매도</li><li><strong>변동성 수익</strong>: 변동성에서 추가 수익 추출</li><li><strong>위험 통제</strong>: 극단적 포지션 방지</li></ol><p><strong>예시</strong>:</p><pre tabindex=0><code>자산 A: 50% → 70% (30% 상승)
자산 B: 50% → 30% (30% 하락)

리밸런싱:
- A 일부 매도 (고점 매도)
- B 일부 매수 (저점 매수)</code></pre><h2 id=114-backtrader에서-다중-자산-백테스팅>11.4 Backtrader에서 다중 자산 백테스팅<a class=anchor href=#114-backtrader%ec%97%90%ec%84%9c-%eb%8b%a4%ec%a4%91-%ec%9e%90%ec%82%b0-%eb%b0%b1%ed%85%8c%ec%8a%a4%ed%8c%85>#</a></h2><h3 id=1141-여러-데이터-피드-추가>11.4.1 여러 데이터 피드 추가<a class=anchor href=#1141-%ec%97%ac%eb%9f%ac-%eb%8d%b0%ec%9d%b4%ed%84%b0-%ed%94%bc%eb%93%9c-%ec%b6%94%ea%b0%80>#</a></h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#75715e># 여러 종목 데이터 다운로드</span>
</span></span><span style=display:flex><span>tickers <span style=color:#f92672>=</span> [<span style=color:#e6db74>&#39;AAPL&#39;</span>, <span style=color:#e6db74>&#39;MSFT&#39;</span>, <span style=color:#e6db74>&#39;GOOGL&#39;</span>, <span style=color:#e6db74>&#39;AMZN&#39;</span>]
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>for</span> ticker <span style=color:#f92672>in</span> tickers:
</span></span><span style=display:flex><span>    data <span style=color:#f92672>=</span> yf<span style=color:#f92672>.</span>download(ticker, start, end)
</span></span><span style=display:flex><span>    data_feed <span style=color:#f92672>=</span> bt<span style=color:#f92672>.</span>feeds<span style=color:#f92672>.</span>PandasData(dataname<span style=color:#f92672>=</span>data)
</span></span><span style=display:flex><span>    cerebro<span style=color:#f92672>.</span>adddata(data_feed, name<span style=color:#f92672>=</span>ticker)</span></span></code></pre></div><h3 id=1142-포트폴리오-전략-구현>11.4.2 포트폴리오 전략 구현<a class=anchor href=#1142-%ed%8f%ac%ed%8a%b8%ed%8f%b4%eb%a6%ac%ec%98%a4-%ec%a0%84%eb%9e%b5-%ea%b5%ac%ed%98%84>#</a></h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#66d9ef>class</span> <span style=color:#a6e22e>PortfolioStrategy</span>(bt<span style=color:#f92672>.</span>Strategy):
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>def</span> <span style=color:#a6e22e>__init__</span>(self):
</span></span><span style=display:flex><span>        <span style=color:#75715e># 각 데이터에 대해 지표 생성</span>
</span></span><span style=display:flex><span>        self<span style=color:#f92672>.</span>mas <span style=color:#f92672>=</span> {}
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>for</span> data <span style=color:#f92672>in</span> self<span style=color:#f92672>.</span>datas:
</span></span><span style=display:flex><span>            self<span style=color:#f92672>.</span>mas[data<span style=color:#f92672>.</span>_name] <span style=color:#f92672>=</span> bt<span style=color:#f92672>.</span>indicators<span style=color:#f92672>.</span>SMA(data<span style=color:#f92672>.</span>close, period<span style=color:#f92672>=</span><span style=color:#ae81ff>50</span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>def</span> <span style=color:#a6e22e>next</span>(self):
</span></span><span style=display:flex><span>        <span style=color:#75715e># 균등 비중 계산</span>
</span></span><span style=display:flex><span>        target_weight <span style=color:#f92672>=</span> <span style=color:#ae81ff>1.0</span> <span style=color:#f92672>/</span> len(self<span style=color:#f92672>.</span>datas)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>for</span> data <span style=color:#f92672>in</span> self<span style=color:#f92672>.</span>datas:
</span></span><span style=display:flex><span>            current_value <span style=color:#f92672>=</span> self<span style=color:#f92672>.</span>getposition(data)<span style=color:#f92672>.</span>size <span style=color:#f92672>*</span> data<span style=color:#f92672>.</span>close[<span style=color:#ae81ff>0</span>]
</span></span><span style=display:flex><span>            portfolio_value <span style=color:#f92672>=</span> self<span style=color:#f92672>.</span>broker<span style=color:#f92672>.</span>getvalue()
</span></span><span style=display:flex><span>            current_weight <span style=color:#f92672>=</span> current_value <span style=color:#f92672>/</span> portfolio_value
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>            <span style=color:#75715e># 리밸런싱</span>
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>if</span> abs(current_weight <span style=color:#f92672>-</span> target_weight) <span style=color:#f92672>&gt;</span> <span style=color:#ae81ff>0.05</span>:
</span></span><span style=display:flex><span>                target_value <span style=color:#f92672>=</span> portfolio_value <span style=color:#f92672>*</span> target_weight
</span></span><span style=display:flex><span>                target_shares <span style=color:#f92672>=</span> target_value <span style=color:#f92672>/</span> data<span style=color:#f92672>.</span>close[<span style=color:#ae81ff>0</span>]
</span></span><span style=display:flex><span>                self<span style=color:#f92672>.</span>order_target_size(data<span style=color:#f92672>=</span>data, target<span style=color:#f92672>=</span>target_shares)</span></span></code></pre></div><h2 id=115-실전-구현>11.5 실전 구현<a class=anchor href=#115-%ec%8b%a4%ec%a0%84-%ea%b5%ac%ed%98%84>#</a></h2><p>이번 챕터의 코드에서는 다음을 구현합니다:</p><ol><li><strong>단일 자산 (AAPL)</strong>: 기준선</li><li><strong>균등 비중 포트폴리오</strong>: 4개 기술주 균등 배분</li><li><strong>역변동성 포트폴리오</strong>: 변동성 역비례 배분</li><li><strong>리밸런싱 효과</strong>: 분기별 리밸런싱 vs. 리밸런싱 없음</li><li><strong>상관관계 분석</strong>: 포트폴리오 구성 자산 간 상관관계</li></ol><h2 id=116-기대-결과>11.6 기대 결과<a class=anchor href=#116-%ea%b8%b0%eb%8c%80-%ea%b2%b0%ea%b3%bc>#</a></h2><p>코드를 실행하면 다음을 확인할 수 있습니다:</p><ol><li><strong>위험 감소 효과</strong>: 단일 자산 vs. 포트폴리오 MDD 비교</li><li><strong>상관관계 매트릭스</strong>: 자산 간 상관관계 히트맵</li><li><strong>효율적 프론티어</strong>: 위험-수익 그래프</li><li><strong>리밸런싱 효과</strong>: 분기별 리밸런싱 수익률 기여</li><li><strong>Sharpe Ratio 개선</strong>: 위험 조정 수익 향상</li></ol><h2 id=117-포트폴리오-구성-원칙>11.7 포트폴리오 구성 원칙<a class=anchor href=#117-%ed%8f%ac%ed%8a%b8%ed%8f%b4%eb%a6%ac%ec%98%a4-%ea%b5%ac%ec%84%b1-%ec%9b%90%ec%b9%99>#</a></h2><h3 id=1171-자산-선택>11.7.1 자산 선택<a class=anchor href=#1171-%ec%9e%90%ec%82%b0-%ec%84%a0%ed%83%9d>#</a></h3><p><strong>1. 상관관계 낮은 자산</strong>:</p><pre tabindex=0><code>✓ 주식 + 채권
✓ 미국 주식 + 해외 주식
✓ 주식 + 원자재
✗ 애플 + 마이크로소프트 (높은 상관)</code></pre><p><strong>2. 다양한 자산군</strong>:</p><ul><li>주식 (성장)</li><li>채권 (안정)</li><li>원자재 (인플레이션 헷지)</li><li>부동산 (대체 투자)</li></ul><p><strong>3. 유동성 고려</strong>:</p><ul><li>거래량 충분</li><li>매수/매도 용이</li></ul><h3 id=1172-비중-결정>11.7.2 비중 결정<a class=anchor href=#1172-%eb%b9%84%ec%a4%91-%ea%b2%b0%ec%a0%95>#</a></h3><p><strong>초보자 권장</strong>:</p><pre tabindex=0><code>주식 60% + 채권 40%
또는
주식 70% + 채권 30%</code></pre><p><strong>공격적 투자자</strong>:</p><pre tabindex=0><code>주식 80% + 대체자산 20%</code></pre><p><strong>보수적 투자자</strong>:</p><pre tabindex=0><code>주식 40% + 채권 50% + 현금 10%</code></pre><h3 id=1173-리밸런싱-규칙>11.7.3 리밸런싱 규칙<a class=anchor href=#1173-%eb%a6%ac%eb%b0%b8%eb%9f%b0%ec%8b%b1-%ea%b7%9c%ec%b9%99>#</a></h3><p><strong>권장 방식</strong>: 분기별 + 5% 임계값</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#66d9ef>if</span> quarter_end:
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>for</span> asset <span style=color:#f92672>in</span> portfolio:
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>if</span> abs(current_weight <span style=color:#f92672>-</span> target_weight) <span style=color:#f92672>&gt;</span> <span style=color:#ae81ff>0.05</span>:
</span></span><span style=display:flex><span>            rebalance(asset)</span></span></code></pre></div><p><strong>수수료 고려</strong>:</p><ul><li>거래 비용 > 리밸런싱 이익이면 skip</li><li>큰 편차만 조정</li></ul><h2 id=118-고급-포트폴리오-기법>11.8 고급 포트폴리오 기법<a class=anchor href=#118-%ea%b3%a0%ea%b8%89-%ed%8f%ac%ed%8a%b8%ed%8f%b4%eb%a6%ac%ec%98%a4-%ea%b8%b0%eb%b2%95>#</a></h2><h3 id=1181-팩터-투자-factor-investing>11.8.1 팩터 투자 (Factor Investing)<a class=anchor href=#1181-%ed%8c%a9%ed%84%b0-%ed%88%ac%ec%9e%90-factor-investing>#</a></h3><p><strong>팩터</strong>: 수익률을 설명하는 체계적 특성</p><ul><li><strong>Value</strong>: 저평가 주식</li><li><strong>Size</strong>: 소형주</li><li><strong>Momentum</strong>: 추세 주식</li><li><strong>Quality</strong>: 고품질 기업</li><li><strong>Low Volatility</strong>: 저변동성 주식</li></ul><h3 id=1182-all-weather-portfolio-레이-달리오>11.8.2 All Weather Portfolio (레이 달리오)<a class=anchor href=#1182-all-weather-portfolio-%eb%a0%88%ec%9d%b4-%eb%8b%ac%eb%a6%ac%ec%98%a4>#</a></h3><p><strong>구성</strong>:</p><pre tabindex=0><code>주식 30%
장기 채권 40%
중기 채권 15%
금 7.5%
원자재 7.5%</code></pre><p><strong>특징</strong>: 모든 경제 환경에서 안정적</p><h3 id=1183-6040-포트폴리오-전통적>11.8.3 60/40 포트폴리오 (전통적)<a class=anchor href=#1183-6040-%ed%8f%ac%ed%8a%b8%ed%8f%b4%eb%a6%ac%ec%98%a4-%ec%a0%84%ed%86%b5%ec%a0%81>#</a></h3><p><strong>구성</strong>:</p><pre tabindex=0><code>주식 60%
채권 40%</code></pre><p><strong>특징</strong>: 검증된 안정성, 간단한 관리</p><h2 id=119-실전-적용-시-주의사항>11.9 실전 적용 시 주의사항<a class=anchor href=#119-%ec%8b%a4%ec%a0%84-%ec%a0%81%ec%9a%a9-%ec%8b%9c-%ec%a3%bc%ec%9d%98%ec%82%ac%ed%95%ad>#</a></h2><h3 id=1191-과거-성과-맹신-금지>11.9.1 과거 성과 맹신 금지<a class=anchor href=#1191-%ea%b3%bc%ea%b1%b0-%ec%84%b1%ea%b3%bc-%eb%a7%b9%ec%8b%a0-%ea%b8%88%ec%a7%80>#</a></h3><p><strong>문제</strong>: 과거 최적이 미래 최적 아님</p><p><strong>해결</strong>:</p><ul><li>다양한 기간 테스트</li><li>Walk-forward 분석</li><li>스트레스 테스트</li></ul><h3 id=1192-극단적-비중-회피>11.9.2 극단적 비중 회피<a class=anchor href=#1192-%ea%b7%b9%eb%8b%a8%ec%a0%81-%eb%b9%84%ec%a4%91-%ed%9a%8c%ed%94%bc>#</a></h3><p><strong>문제</strong>: 평균-분산 최적화 시 극단적 배분</p><pre tabindex=0><code>자산 A: 95%, 자산 B: 5% ← 위험!</code></pre><p><strong>해결</strong>:</p><ul><li>최소/최대 비중 제약</li><li>정규화 (Regularization)</li></ul><h3 id=1193-실시간-모니터링>11.9.3 실시간 모니터링<a class=anchor href=#1193-%ec%8b%a4%ec%8b%9c%ea%b0%84-%eb%aa%a8%eb%8b%88%ed%84%b0%eb%a7%81>#</a></h3><p><strong>필수 지표</strong>:</p><ul><li>포트폴리오 가치</li><li>각 자산 비중</li><li>최대 낙폭</li><li>Sharpe Ratio</li></ul><h2 id=1110-개선-방향>11.10 개선 방향<a class=anchor href=#1110-%ea%b0%9c%ec%84%a0-%eb%b0%a9%ed%96%a5>#</a></h2><p>포트폴리오 전략을 더욱 개선하는 방법:</p><ol><li><strong>동적 자산 배분</strong>: 시장 환경에 따라 비중 조정</li><li><strong>Black-Litterman 모델</strong>: 주관적 전망과 시장 균형 결합</li><li><strong>위험 버짓팅</strong>: 각 자산에 위험 예산 할당</li><li><strong>조건부 상관관계</strong>: VIX 높을 때 상관관계 변화 반영</li><li><strong>머신러닝 최적화</strong>: 최적 비중 학습</li></ol><h2 id=다음-단계>다음 단계<a class=anchor href=#%eb%8b%a4%ec%9d%8c-%eb%8b%a8%ea%b3%84>#</a></h2><p>Part 3 (리스크와 포트폴리오 관리)를 완료했습니다! 다음 Part 4에서는 백테스팅 성과를 평가하고 비교하는 방법을 다룹니다:</p><ul><li>Chapter 12: 성과 평가 지표</li><li>Chapter 13: 전략 비교와 최적화</li></ul><p>지금까지 <strong>언제</strong> 매매하고 (기술적 분석), <strong>얼마나</strong> 투자하며 (포지션 크기), <strong>어떻게</strong> 위험을 관리하고 (손절매), <strong>무엇에</strong> 분산할지 (포트폴리오)를 배웠습니다. 이제 전략을 <strong>어떻게 평가</strong>할지 배울 차례입니다.</p><hr><h2 id=1111-실행-결과>11.11 실행 결과<a class=anchor href=#1111-%ec%8b%a4%ed%96%89-%ea%b2%b0%ea%b3%bc>#</a></h2><p>실제로 스크립트를 실행한 결과입니다:</p><pre tabindex=0><code>==========================================
Chapter 11: 포트폴리오 구성과 분산투자
==========================================
테스트 기간: 2019-01-01 ~ 2024-01-01
포트폴리오 구성: AAPL, MSFT, GOOGL, AMZN

==========================================
단일 자산 전략 (AAPL)
==========================================
최종 자산: $49,597.99
총 수익률: +395.98%
Sharpe Ratio: 1.09
최대 낙폭: -30.03%
총 거래 수: 1

==========================================
균등 비중 포트폴리오
==========================================
최종 자산: $29,312.50
총 수익률: +193.13%
Sharpe Ratio: 0.87
최대 낙폭: -39.15%
총 거래 수: 16 (리밸런싱 포함)
평균 종목 비중: 25% (목표)

==========================================
역변동성 비중 포트폴리오
==========================================
최종 자산: $25,142.00
총 수익률: +151.42%
Sharpe Ratio: 0.79
최대 낙폭: -38.05%
총 거래 수: 16 (리밸런싱 포함)

==========================================
상관관계 분석
==========================================
         AAPL   MSFT  GOOGL   AMZN
AAPL    1.000  0.756  0.682  0.624
MSFT    0.756  1.000  0.723  0.651
GOOGL   0.682  0.723  1.000  0.697
AMZN    0.624  0.651  0.697  1.000

높은 상관관계(0.6~0.8): 같은 기술주 섹터
→ 분산 효과 제한적

==========================================
결과 저장 완료
==========================================
차트: codes/chapter11/images/portfolio_diversification.png</code></pre><p><img src=/images/chapter11/portfolio_diversification.png alt="포트폴리오 분산투자 분석"></p><h3 id=차트-해석>차트 해석<a class=anchor href=#%ec%b0%a8%ed%8a%b8-%ed%95%b4%ec%84%9d>#</a></h3><p><strong>좌상단 패널 - 자산 곡선 비교</strong>:</p><ul><li><strong>단일 자산 (AAPL, 파란선)</strong>: 놀랍게도 가장 높은 수익률(+395.98%)을 기록했습니다. 2019-2024년 동안 AAPL의 강력한 상승세를 그대로 포착했습니다</li><li><strong>균등 비중 포트폴리오 (주황선)</strong>: 두 번째 수익률(+193.13%)을 보였습니다. AAPL보다 낮지만 여전히 높은 수익을 기록했습니다</li><li><strong>역변동성 비중 (녹색선)</strong>: 가장 낮은 수익률(+151.42%)이지만 가장 안정적인 상승 곡선을 보였습니다</li></ul><p><strong>우상단 패널 - 최대 낙폭 비교</strong>:</p><ul><li><strong>단일 자산</strong>: -30.03%로 가장 낮은 최대 낙폭을 기록했습니다. 예상과 달리 분산 포트폴리오보다 낙폭이 작았습니다</li><li><strong>균등 비중</strong>: -39.15%로 가장 큰 낙폭을 보였습니다. 4개 종목 모두 2020년 3월 코로나 팬데믹 때 동시에 하락했기 때문입니다</li><li><strong>역변동성</strong>: -38.05%로 균등 비중과 비슷한 낙폭을 보였습니다</li></ul><p><strong>좌하단 패널 - 상관관계 히트맵</strong>:</p><ul><li>모든 종목 간 상관계수가 <strong>0.62~0.76</strong>으로 매우 높습니다</li><li>같은 기술주 섹터에 속해 있어 시장 움직임에 동시에 반응합니다</li><li><strong>AAPL-MSFT</strong>: 0.756으로 가장 높은 상관관계 (둘 다 대형 기술주)</li><li><strong>AAPL-AMZN</strong>: 0.624로 상대적으로 낮지만 여전히 높은 상관관계</li></ul><p><strong>우하단 패널 - 리스크-수익 산점도</strong>:</p><ul><li><strong>단일 자산 (AAPL)</strong>: 가장 오른쪽 위에 위치 → 최고 수익률 + 중간 리스크</li><li><strong>균등 비중</strong>: 중간 위치 → 중간 수익률 + 높은 리스크</li><li><strong>역변동성</strong>: 왼쪽 아래 → 낮은 수익률 + 낮은 리스크</li><li>이상적으로는 왼쪽 위(낮은 리스크, 높은 수익)를 원하지만, 이 경우 AAPL이 가장 효율적입니다</li></ul><h3 id=핵심-인사이트>핵심 인사이트<a class=anchor href=#%ed%95%b5%ec%8b%ac-%ec%9d%b8%ec%82%ac%ec%9d%b4%ed%8a%b8>#</a></h3><p><strong>1. 분산투자의 역설 (이 케이스에서)</strong></p><ul><li><strong>예상</strong>: 분산 → 리스크 감소 + 안정적 수익</li><li><strong>실제</strong>: 단일 자산(AAPL)이 더 높은 수익 + 더 낮은 낙폭</li><li><strong>원인</strong>: 2019-2024년은 AAPL의 황금기였고, 다른 종목들은 상대적으로 부진했습니다</li></ul><p><strong>2. 상관관계의 중요성</strong></p><ul><li>4개 기술주의 상관계수가 <strong>0.62~0.76</strong>으로 매우 높습니다</li><li>진정한 분산 효과를 얻으려면 <strong>상관관계 &lt; 0.5</strong> 또는 <strong>음의 상관관계</strong>가 필요합니다</li><li><strong>교훈</strong>: 같은 섹터 내 분산은 진정한 분산이 아닙니다</li></ul><p><strong>3. 시스템적 리스크 (Systematic Risk)</strong></p><ul><li>2020년 3월 코로나 팬데믹 때 <strong>모든 종목이 동시에 하락</strong>했습니다</li><li>이는 시스템적 리스크로, 분산투자로도 피할 수 없습니다</li><li>분산투자는 **비체계적 리스크(종목 고유 리스크)**만 줄일 수 있습니다</li></ul><p><strong>4. 균등 비중 vs. 역변동성 비중</strong></p><ul><li><strong>균등 비중</strong>: +193.13%, Sharpe 0.87 → 더 높은 수익</li><li><strong>역변동성</strong>: +151.42%, Sharpe 0.79 → 더 낮은 수익</li><li>역변동성 비중은 안정성을 추구하지만, 성장주 비중을 줄여 수익도 감소했습니다</li><li><strong>적합한 경우</strong>: 보수적 투자자, 하락장 대비</li></ul><p><strong>5. 리밸런싱 효과</strong></p><ul><li>균등 비중과 역변동성 모두 16회 거래 발생 (분기별 리밸런싱)</li><li>리밸런싱은 &ldquo;고점 매도, 저점 매수&rdquo; 효과를 제공합니다</li><li>하지만 이 케이스에서는 AAPL의 지속적 상승으로 리밸런싱이 오히려 손해였습니다</li></ul><p><strong>6. Sharpe Ratio 비교</strong></p><ul><li><strong>단일 자산</strong>: 1.09 (가장 높음) → 리스크 대비 수익 최고</li><li><strong>균등 비중</strong>: 0.87 → 양호</li><li><strong>역변동성</strong>: 0.79 → 괜찮음</li><li>이 기간에는 단일 자산이 가장 효율적이었습니다</li></ul><h3 id=그렇다면-분산투자는-필요-없는가>그렇다면 분산투자는 필요 없는가?<a class=anchor href=#%ea%b7%b8%eb%a0%87%eb%8b%a4%eb%a9%b4-%eb%b6%84%ec%82%b0%ed%88%ac%ec%9e%90%eb%8a%94-%ed%95%84%ec%9a%94-%ec%97%86%eb%8a%94%ea%b0%80>#</a></h3><p><strong>아니다! 이 결과는 특수한 경우입니다</strong>:</p><p><strong>1. 사후 편향 (Hindsight Bias)</strong></p><ul><li>2019년 시점에서 AAPL이 최고 성과를 낼 것을 알 수 없었습니다</li><li>백테스트는 &ldquo;이미 알고 있는 과거"를 보는 것입니다</li></ul><p><strong>2. 생존 편향 (Survivorship Bias)</strong></p><ul><li>우리는 성공한 AAPL을 선택했습니다</li><li>같은 기간 망한 기술주들은 고려하지 않았습니다</li></ul><p><strong>3. 시장 환경의 특수성</strong></p><ul><li>2019-2024년은 기술주 슈퍼사이클이었습니다</li><li>다른 기간(예: 2000-2002 닷컴 버블 붕괴)에서는 결과가 정반대일 수 있습니다</li></ul><p><strong>4. 미래는 과거와 다릅니다</strong></p><ul><li>과거 최고 종목이 미래에도 최고일 보장이 없습니다</li><li>분산투자는 미래 불확실성에 대한 보험입니다</li></ul><h3 id=올바른-분산투자-방법>올바른 분산투자 방법<a class=anchor href=#%ec%98%ac%eb%b0%94%eb%a5%b8-%eb%b6%84%ec%82%b0%ed%88%ac%ec%9e%90-%eb%b0%a9%eb%b2%95>#</a></h3><p><strong>1. 섹터 분산</strong>:</p><pre tabindex=0><code>✗ 잘못된 분산: AAPL, MSFT, GOOGL, AMZN (모두 기술주)
✓ 올바른 분산:
  - 기술주 25% (AAPL)
  - 헬스케어 25% (JNJ)
  - 금융 25% (JPM)
  - 원자재 25% (GOLD)</code></pre><p><strong>2. 자산군 분산</strong>:</p><pre tabindex=0><code>주식 60% + 채권 30% + 원자재 10%
→ 상관관계 0.3 이하로 진정한 분산 효과</code></pre><p><strong>3. 지역 분산</strong>:</p><pre tabindex=0><code>미국 50% + 유럽 25% + 신흥국 25%
→ 지역별 경제 사이클 차이 활용</code></pre><h3 id=실전-적용-가이드>실전 적용 가이드<a class=anchor href=#%ec%8b%a4%ec%a0%84-%ec%a0%81%ec%9a%a9-%ea%b0%80%ec%9d%b4%eb%93%9c>#</a></h3><p><strong>투자자 유형별 권장 포트폴리오</strong>:</p><table><thead><tr><th>투자자 유형</th><th>포트폴리오 구성</th><th>기대 수익/리스크</th></tr></thead><tbody><tr><td>공격적</td><td>기술주 80% + 성장주 20%</td><td>높은 수익, 높은 변동성</td></tr><tr><td>균형</td><td>주식 60% + 채권 40%</td><td>중간 수익, 중간 변동성</td></tr><tr><td>보수적</td><td>주식 30% + 채권 60% + 현금 10%</td><td>낮은 수익, 낮은 변동성</td></tr></tbody></table><p><strong>리밸런싱 주기</strong>:</p><ul><li><strong>분기별</strong>: 이 테스트에서 사용, 적당한 빈도</li><li><strong>반기별</strong>: 수수료 절감, 추세 포착에 유리</li><li><strong>연간</strong>: 장기 투자자 적합, 최소 비용</li></ul><p><strong>상관관계 체크리스트</strong>:</p><ul><li><input disabled type=checkbox> 포트폴리오 내 평균 상관계수 &lt; 0.5</li><li><input disabled type=checkbox> 최소 3개 이상의 서로 다른 섹터</li><li><input disabled type=checkbox> 주식 외 자산군 포함 (채권, 원자재 등)</li><li><input disabled type=checkbox> 지역 분산 고려 (국내 + 해외)</li></ul><hr><p><strong>코드 실행:</strong></p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-bash data-lang=bash><span style=display:flex><span>cd codes
</span></span><span style=display:flex><span>uv run chapter11/01_portfolio_diversification.py</span></span></code></pre></div></article><footer class=book-footer><div class="flex flex-wrap justify-between"><div></div><div></div></div><div class="flex flex-wrap justify-between"><span><a href=/intro-to-backtesting/docs/chapter10/ class="flex align-center"><img src=/intro-to-backtesting/icons/backward.svg class=book-icon alt=Backward>
<span>Chapter 10: 리스크 관리와 손절매</span>
</a></span><span><a href=/intro-to-backtesting/docs/chapter12/ class="flex align-center"><span>Chapter 12: 성과 지표와 리스크 측정</span>
<img src=/intro-to-backtesting/icons/forward.svg class=book-icon alt=Forward></a></span></div><script>(function(){document.querySelectorAll("pre:has(code)").forEach(e=>{e.addEventListener("click",e.focus),e.addEventListener("copy",function(t){if(t.preventDefault(),navigator.clipboard){const t=window.getSelection().toString()||e.textContent;navigator.clipboard.writeText(t)}})})})()</script></footer><label for=menu-control class="hidden book-menu-overlay"></label></div><aside class=book-toc><div class=book-toc-content><nav id=TableOfContents><ul><li><a href=#111-분산투자의-원리>11.1 분산투자의 원리</a><ul><li><a href=#1111-왜-분산투자가-필요한가>11.1.1 왜 분산투자가 필요한가?</a></li><li><a href=#1112-상관관계의-중요성>11.1.2 상관관계의 중요성</a></li><li><a href=#1113-최적-분산-개수>11.1.3 최적 분산 개수</a></li></ul></li><li><a href=#112-포트폴리오-배분-전략>11.2 포트폴리오 배분 전략</a><ul><li><a href=#1121-균등-비중-equal-weight>11.2.1 균등 비중 (Equal Weight)</a></li><li><a href=#1122-시가총액-비중-market-cap-weight>11.2.2 시가총액 비중 (Market Cap Weight)</a></li><li><a href=#1123-역변동성-비중-inverse-volatility>11.2.3 역변동성 비중 (Inverse Volatility)</a></li><li><a href=#1124-리스크-패리티-risk-parity>11.2.4 리스크 패리티 (Risk Parity)</a></li><li><a href=#1125-평균-분산-최적화-mean-variance-optimization>11.2.5 평균-분산 최적화 (Mean-Variance Optimization)</a></li></ul></li><li><a href=#113-리밸런싱-rebalancing>11.3 리밸런싱 (Rebalancing)</a><ul><li><a href=#1131-리밸런싱의-필요성>11.3.1 리밸런싱의 필요성</a></li><li><a href=#1132-리밸런싱-방법>11.3.2 리밸런싱 방법</a></li><li><a href=#1133-리밸런싱의-효과>11.3.3 리밸런싱의 효과</a></li></ul></li><li><a href=#114-backtrader에서-다중-자산-백테스팅>11.4 Backtrader에서 다중 자산 백테스팅</a><ul><li><a href=#1141-여러-데이터-피드-추가>11.4.1 여러 데이터 피드 추가</a></li><li><a href=#1142-포트폴리오-전략-구현>11.4.2 포트폴리오 전략 구현</a></li></ul></li><li><a href=#115-실전-구현>11.5 실전 구현</a></li><li><a href=#116-기대-결과>11.6 기대 결과</a></li><li><a href=#117-포트폴리오-구성-원칙>11.7 포트폴리오 구성 원칙</a><ul><li><a href=#1171-자산-선택>11.7.1 자산 선택</a></li><li><a href=#1172-비중-결정>11.7.2 비중 결정</a></li><li><a href=#1173-리밸런싱-규칙>11.7.3 리밸런싱 규칙</a></li></ul></li><li><a href=#118-고급-포트폴리오-기법>11.8 고급 포트폴리오 기법</a><ul><li><a href=#1181-팩터-투자-factor-investing>11.8.1 팩터 투자 (Factor Investing)</a></li><li><a href=#1182-all-weather-portfolio-레이-달리오>11.8.2 All Weather Portfolio (레이 달리오)</a></li><li><a href=#1183-6040-포트폴리오-전통적>11.8.3 60/40 포트폴리오 (전통적)</a></li></ul></li><li><a href=#119-실전-적용-시-주의사항>11.9 실전 적용 시 주의사항</a><ul><li><a href=#1191-과거-성과-맹신-금지>11.9.1 과거 성과 맹신 금지</a></li><li><a href=#1192-극단적-비중-회피>11.9.2 극단적 비중 회피</a></li><li><a href=#1193-실시간-모니터링>11.9.3 실시간 모니터링</a></li></ul></li><li><a href=#1110-개선-방향>11.10 개선 방향</a></li><li><a href=#다음-단계>다음 단계</a></li><li><a href=#1111-실행-결과>11.11 실행 결과</a><ul><li><a href=#차트-해석>차트 해석</a></li><li><a href=#핵심-인사이트>핵심 인사이트</a></li><li><a href=#그렇다면-분산투자는-필요-없는가>그렇다면 분산투자는 필요 없는가?</a></li><li><a href=#올바른-분산투자-방법>올바른 분산투자 방법</a></li><li><a href=#실전-적용-가이드>실전 적용 가이드</a></li></ul></li></ul></nav></div></aside></main></body></html>