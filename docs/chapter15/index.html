<!doctype html><html lang=en-us dir=ltr><head><meta charset=UTF-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="Chapter 15: 머신러닝 기반 전략 (Part 1)# 15.1 소개# 전통적인 기술적 분석 전략은 규칙 기반(rule-based)이지만, 머신러닝은 데이터에서 패턴을 자동으로 학습합니다. 이 장에서는 머신러닝을 트레이딩 전략에 적용하는 기초를 학습합니다.
15.2 머신러닝과 트레이딩# 15.2.1 왜 머신러닝인가?# 장점:
복잡한 비선형 패턴 발견 다양한 특성(feature) 동시 고려 데이터 기반 의사결정 자동화된 규칙 생성 단점:
과적합 위험 높음 해석 어려움 (블랙박스) 많은 데이터 필요 시장 변화에 민감 15.2.2 트레이딩 문제의 유형# 분류 (Classification): 상승/하락 예측
"><meta name=theme-color media="(prefers-color-scheme: light)" content="#ffffff"><meta name=theme-color media="(prefers-color-scheme: dark)" content="#343a40"><meta name=color-scheme content="light dark"><meta property="og:url" content="https://k2sebeom.github.io/intro-to-backtesting/docs/chapter15/"><meta property="og:site_name" content="파이썬으로 배우는 백테스팅 입문"><meta property="og:title" content="Chapter 15: 머신러닝 기반 전략 (1)"><meta property="og:description" content="Chapter 15: 머신러닝 기반 전략 (Part 1)# 15.1 소개# 전통적인 기술적 분석 전략은 규칙 기반(rule-based)이지만, 머신러닝은 데이터에서 패턴을 자동으로 학습합니다. 이 장에서는 머신러닝을 트레이딩 전략에 적용하는 기초를 학습합니다.
15.2 머신러닝과 트레이딩# 15.2.1 왜 머신러닝인가?# 장점:
복잡한 비선형 패턴 발견 다양한 특성(feature) 동시 고려 데이터 기반 의사결정 자동화된 규칙 생성 단점:
과적합 위험 높음 해석 어려움 (블랙박스) 많은 데이터 필요 시장 변화에 민감 15.2.2 트레이딩 문제의 유형# 분류 (Classification): 상승/하락 예측"><meta property="og:locale" content="en_us"><meta property="og:type" content="article"><meta property="article:section" content="docs"><meta property="article:modified_time" content="2026-02-05T03:00:29+00:00"><meta itemprop=name content="Chapter 15: 머신러닝 기반 전략 (1)"><meta itemprop=description content="Chapter 15: 머신러닝 기반 전략 (Part 1)# 15.1 소개# 전통적인 기술적 분석 전략은 규칙 기반(rule-based)이지만, 머신러닝은 데이터에서 패턴을 자동으로 학습합니다. 이 장에서는 머신러닝을 트레이딩 전략에 적용하는 기초를 학습합니다.
15.2 머신러닝과 트레이딩# 15.2.1 왜 머신러닝인가?# 장점:
복잡한 비선형 패턴 발견 다양한 특성(feature) 동시 고려 데이터 기반 의사결정 자동화된 규칙 생성 단점:
과적합 위험 높음 해석 어려움 (블랙박스) 많은 데이터 필요 시장 변화에 민감 15.2.2 트레이딩 문제의 유형# 분류 (Classification): 상승/하락 예측"><meta itemprop=dateModified content="2026-02-05T03:00:29+00:00"><meta itemprop=wordCount content="1952"><title>Chapter 15: 머신러닝 기반 전략 (1) | 파이썬으로 배우는 백테스팅 입문</title><link rel=icon href=/intro-to-backtesting/favicon.png><link rel=manifest href=/intro-to-backtesting/manifest.json><link rel=canonical href=https://k2sebeom.github.io/intro-to-backtesting/docs/chapter15/><link rel=stylesheet href=/intro-to-backtesting/book.min.cc2c524ed250aac81b23d1f4af87344917b325208841feca0968fe450f570575.css integrity="sha256-zCxSTtJQqsgbI9H0r4c0SRezJSCIQf7KCWj+RQ9XBXU=" crossorigin=anonymous><script defer src=/intro-to-backtesting/fuse.min.js></script><script defer src=/intro-to-backtesting/en.search.min.045ca227d4176807ad581a410adc82f05790d9bf1e41b6de6824aa408874b1e4.js integrity="sha256-BFyiJ9QXaAetWBpBCtyC8FeQ2b8eQbbeaCSqQIh0seQ=" crossorigin=anonymous></script><script id=MathJax-script async src=https://cdn.jsdelivr.net/npm/mathjax@4/tex-mml-chtml.js></script><script>MathJax={tex:{displayMath:[["\\[","\\]"],["$$","$$"]],inlineMath:[["\\(","\\)"],["$","$"]]},loader:{load:["ui/safe"]}}</script></head><body dir=ltr class="book-kind-page book-type-docs"><input type=checkbox class="hidden toggle" id=menu-control>
<input type=checkbox class="hidden toggle" id=toc-control><main class="container flex"><aside class=book-menu><div class=book-menu-content><nav><h2 class=book-brand><a class="flex align-center" href=/intro-to-backtesting/><span>파이썬으로 배우는 백테스팅 입문</span></a></h2><div class="book-search hidden"><input id=book-search-input type=text placeholder=Search aria-label=Search maxlength=64 data-hotkeys=s/><div class="book-search-spinner hidden"></div><ul id=book-search-results></ul></div><script>document.querySelector(".book-search").classList.remove("hidden")</script><ul><li><a href=/intro-to-backtesting/docs/chapter01/>Chapter 1: 백테스팅 시작하기</a></li><li><a href=/intro-to-backtesting/docs/chapter02/>Chapter 2: 금융 데이터 다운로드와 이해</a></li><li><a href=/intro-to-backtesting/docs/chapter03/>Chapter 3: 데이터 전처리와 수익률</a></li><li><a href=/intro-to-backtesting/docs/chapter04/>Chapter 4: Backtrader 프레임워크 기초</a></li><li><a href=/intro-to-backtesting/docs/chapter05/>Chapter 5: 이동평균 전략</a></li><li><a href=/intro-to-backtesting/docs/chapter06/>Chapter 6: RSI 및 과매수/과매도 전략</a></li><li><a href=/intro-to-backtesting/docs/chapter07/>Chapter 7: Bollinger Bands 전략</a></li><li><a href=/intro-to-backtesting/docs/chapter08/>Chapter 8: 다중 지표 결합 전략</a></li><li><a href=/intro-to-backtesting/docs/chapter09/>Chapter 9: 포지션 크기 결정</a></li><li><a href=/intro-to-backtesting/docs/chapter10/>Chapter 10: 리스크 관리와 손절매</a></li><li><a href=/intro-to-backtesting/docs/chapter11/>Chapter 11: 포트폴리오 구성과 분산투자</a></li><li><a href=/intro-to-backtesting/docs/chapter12/>Chapter 12: 성과 지표와 리스크 측정</a></li><li><a href=/intro-to-backtesting/docs/chapter13/>Chapter 13: 백테스트 결과 분석과 시각화</a></li><li><a href=/intro-to-backtesting/docs/chapter14/>Chapter 14: 과최적화 방지와 검증</a></li><li><a href=/intro-to-backtesting/docs/chapter15/ class=active>Chapter 15: 머신러닝 기반 전략 (1)</a></li><li><a href=/intro-to-backtesting/docs/chapter16/>Chapter 16: 머신러닝 기반 전략 (2)</a></li><li><a href=/intro-to-backtesting/docs/chapter17/>Chapter 17: 실전 트레이딩 고려사항</a></li><li><a href=/intro-to-backtesting/docs/chapter18/>Chapter 18: 완전한 전략 개발 프로세스</a></li></ul></nav><script>(function(){var e=document.querySelector("aside .book-menu-content");addEventListener("beforeunload",function(){localStorage.setItem("menu.scrollTop",e.scrollTop)}),e.scrollTop=localStorage.getItem("menu.scrollTop")})()</script></div></aside><div class=book-page><header class="book-header hidden"><div class="flex align-center justify-between"><label for=menu-control><img src=/intro-to-backtesting/icons/menu.svg class=book-icon alt=Menu></label><h3>Chapter 15: 머신러닝 기반 전략 (1)</h3><label for=toc-control><img src=/intro-to-backtesting/icons/toc.svg class=book-icon alt="Table of Contents"></label></div><aside class=hidden><nav id=TableOfContents><ul><li><a href=#151-소개>15.1 소개</a></li><li><a href=#152-머신러닝과-트레이딩>15.2 머신러닝과 트레이딩</a><ul><li><a href=#1521-왜-머신러닝인가>15.2.1 왜 머신러닝인가?</a></li><li><a href=#1522-트레이딩-문제의-유형>15.2.2 트레이딩 문제의 유형</a></li></ul></li><li><a href=#153-특성-엔지니어링-feature-engineering>15.3 특성 엔지니어링 (Feature Engineering)</a><ul><li><a href=#1531-기술적-지표를-특성으로>15.3.1 기술적 지표를 특성으로</a></li><li><a href=#1532-래그-특성-lag-features>15.3.2 래그 특성 (Lag Features)</a></li><li><a href=#1533-타겟-레이블-생성>15.3.3 타겟 레이블 생성</a></li><li><a href=#1534-특성-스케일링>15.3.4 특성 스케일링</a></li></ul></li><li><a href=#154-시계열-데이터-처리>15.4 시계열 데이터 처리</a><ul><li><a href=#1541-시계열-분할의-특수성>15.4.1 시계열 분할의 특수성</a></li><li><a href=#1542-look-ahead-bias-방지>15.4.2 Look-Ahead Bias 방지</a></li></ul></li><li><a href=#155-머신러닝-모델>15.5 머신러닝 모델</a><ul><li><a href=#1551-로지스틱-회귀-logistic-regression>15.5.1 로지스틱 회귀 (Logistic Regression)</a></li><li><a href=#1552-랜덤-포레스트-random-forest>15.5.2 랜덤 포레스트 (Random Forest)</a></li><li><a href=#1553-그래디언트-부스팅-gradient-boosting>15.5.3 그래디언트 부스팅 (Gradient Boosting)</a></li></ul></li><li><a href=#156-모델-평가>15.6 모델 평가</a><ul><li><a href=#1561-분류-성과-지표>15.6.1 분류 성과 지표</a></li><li><a href=#1562-roc-곡선과-auc>15.6.2 ROC 곡선과 AUC</a></li></ul></li><li><a href=#157-과적합-방지>15.7 과적합 방지</a><ul><li><a href=#1571-교차-검증>15.7.1 교차 검증</a></li><li><a href=#1572-정규화-regularization>15.7.2 정규화 (Regularization)</a></li><li><a href=#1573-조기-종료-early-stopping>15.7.3 조기 종료 (Early Stopping)</a></li></ul></li><li><a href=#158-실습-ml-기반-트레이딩-전략>15.8 실습: ML 기반 트레이딩 전략</a><ul><li><a href=#코드-예제>코드 예제</a></li><li><a href=#주요-워크플로우>주요 워크플로우</a></li></ul></li><li><a href=#159-요약>15.9 요약</a></li><li><a href=#1510-실행-결과>15.10 실행 결과</a><ul><li><a href=#차트-해석>차트 해석</a></li><li><a href=#핵심-인사이트>핵심 인사이트</a></li><li><a href=#이-결과가-주는-가치있는-교훈>이 결과가 주는 가치있는 교훈</a></li><li><a href=#실전-적용-가이드>실전 적용 가이드</a></li></ul></li><li><a href=#연습-문제>연습 문제</a></li></ul></nav></aside></header><article class="markdown book-article"><h1 id=chapter-15-머신러닝-기반-전략-part-1>Chapter 15: 머신러닝 기반 전략 (Part 1)<a class=anchor href=#chapter-15-%eb%a8%b8%ec%8b%a0%eb%9f%ac%eb%8b%9d-%ea%b8%b0%eb%b0%98-%ec%a0%84%eb%9e%b5-part-1>#</a></h1><h2 id=151-소개>15.1 소개<a class=anchor href=#151-%ec%86%8c%ea%b0%9c>#</a></h2><p>전통적인 기술적 분석 전략은 규칙 기반(rule-based)이지만, 머신러닝은 데이터에서 패턴을 자동으로 학습합니다. 이 장에서는 머신러닝을 트레이딩 전략에 적용하는 기초를 학습합니다.</p><h2 id=152-머신러닝과-트레이딩>15.2 머신러닝과 트레이딩<a class=anchor href=#152-%eb%a8%b8%ec%8b%a0%eb%9f%ac%eb%8b%9d%ea%b3%bc-%ed%8a%b8%eb%a0%88%ec%9d%b4%eb%94%a9>#</a></h2><h3 id=1521-왜-머신러닝인가>15.2.1 왜 머신러닝인가?<a class=anchor href=#1521-%ec%99%9c-%eb%a8%b8%ec%8b%a0%eb%9f%ac%eb%8b%9d%ec%9d%b8%ea%b0%80>#</a></h3><p><strong>장점</strong>:</p><ul><li>복잡한 비선형 패턴 발견</li><li>다양한 특성(feature) 동시 고려</li><li>데이터 기반 의사결정</li><li>자동화된 규칙 생성</li></ul><p><strong>단점</strong>:</p><ul><li>과적합 위험 높음</li><li>해석 어려움 (블랙박스)</li><li>많은 데이터 필요</li><li>시장 변화에 민감</li></ul><h3 id=1522-트레이딩-문제의-유형>15.2.2 트레이딩 문제의 유형<a class=anchor href=#1522-%ed%8a%b8%eb%a0%88%ec%9d%b4%eb%94%a9-%eb%ac%b8%ec%a0%9c%ec%9d%98-%ec%9c%a0%ed%98%95>#</a></h3><ol><li><p><strong>분류 (Classification)</strong>: 상승/하락 예측</p><ul><li>목표: 다음 기간에 가격이 오를지 내릴지 예측</li><li>출력: 0 (하락) 또는 1 (상승)</li></ul></li><li><p><strong>회귀 (Regression)</strong>: 수익률 크기 예측</p><ul><li>목표: 다음 기간의 수익률 예측</li><li>출력: 연속적인 수익률 값</li></ul></li><li><p><strong>강화학습 (Reinforcement Learning)</strong>: 최적 행동 학습</p><ul><li>목표: 보상을 최대화하는 매매 행동 학습</li><li>출력: 매수/매도/보유 행동</li></ul></li></ol><p>이 장에서는 <strong>분류 문제</strong>에 집중합니다.</p><h2 id=153-특성-엔지니어링-feature-engineering>15.3 특성 엔지니어링 (Feature Engineering)<a class=anchor href=#153-%ed%8a%b9%ec%84%b1-%ec%97%94%ec%a7%80%eb%8b%88%ec%96%b4%eb%a7%81-feature-engineering>#</a></h2><h3 id=1531-기술적-지표를-특성으로>15.3.1 기술적 지표를 특성으로<a class=anchor href=#1531-%ea%b8%b0%ec%88%a0%ec%a0%81-%ec%a7%80%ed%91%9c%eb%a5%bc-%ed%8a%b9%ec%84%b1%ec%9c%bc%eb%a1%9c>#</a></h3><p>기술적 지표들을 머신러닝 모델의 입력 특성으로 사용합니다:</p><p><strong>가격 기반 특성</strong>:</p><ul><li>수익률: $R_t = \frac{P_t - P_{t-1}}{P_{t-1}}$</li><li>이동평균: SMA, EMA</li><li>상대적 위치: $\frac{P_t - \text{SMA}_t}{\text{SMA}_t}$</li></ul><p><strong>모멘텀 지표</strong>:</p><ul><li>RSI (Relative Strength Index)</li><li>MACD (Moving Average Convergence Divergence)</li><li>ROC (Rate of Change)</li></ul><p><strong>변동성 지표</strong>:</p><ul><li>Bollinger Bands</li><li>ATR (Average True Range)</li><li>표준편차</li></ul><p><strong>거래량 지표</strong>:</p><ul><li>거래량 이동평균</li><li>OBV (On-Balance Volume)</li><li>거래량 변화율</li></ul><h3 id=1532-래그-특성-lag-features>15.3.2 래그 특성 (Lag Features)<a class=anchor href=#1532-%eb%9e%98%ea%b7%b8-%ed%8a%b9%ec%84%b1-lag-features>#</a></h3><p>과거 값들을 특성으로 사용:</p>$$X_t = [R_{t-1}, R_{t-2}, \ldots, R_{t-n}]$$<p>예: 지난 5일간의 수익률을 특성으로 사용</p><h3 id=1533-타겟-레이블-생성>15.3.3 타겟 레이블 생성<a class=anchor href=#1533-%ed%83%80%ea%b2%9f-%eb%a0%88%ec%9d%b4%eb%b8%94-%ec%83%9d%ec%84%b1>#</a></h3><p>분류 문제를 위한 레이블 생성:</p><p><strong>이진 분류</strong>:</p>$$y_t = \begin{cases}
1 & \text{if } R_{t+1} > 0 \\
0 & \text{if } R_{t+1} \leq 0
\end{cases}$$<p><strong>임계값 기반</strong>:</p>$$y_t = \begin{cases}
1 & \text{if } R_{t+1} > \theta \\
0 & \text{if } R_{t+1} \leq \theta
\end{cases}$$<p>여기서 $\theta$는 임계값(예: 0.01 = 1%)</p><h3 id=1534-특성-스케일링>15.3.4 특성 스케일링<a class=anchor href=#1534-%ed%8a%b9%ec%84%b1-%ec%8a%a4%ec%bc%80%ec%9d%bc%eb%a7%81>#</a></h3><p>머신러닝 모델은 특성의 스케일에 민감합니다:</p><p><strong>표준화 (Standardization)</strong>:</p>$$X_{\text{scaled}} = \frac{X - \mu}{\sigma}$$<p><strong>정규화 (Normalization)</strong>:</p>$$X_{\text{scaled}} = \frac{X - X_{\min}}{X_{\max} - X_{\min}}$$<p><strong>주의</strong>: 훈련 세트의 통계만 사용해야 합니다 (Look-ahead bias 방지)!</p><h2 id=154-시계열-데이터-처리>15.4 시계열 데이터 처리<a class=anchor href=#154-%ec%8b%9c%ea%b3%84%ec%97%b4-%eb%8d%b0%ec%9d%b4%ed%84%b0-%ec%b2%98%eb%a6%ac>#</a></h2><h3 id=1541-시계열-분할의-특수성>15.4.1 시계열 분할의 특수성<a class=anchor href=#1541-%ec%8b%9c%ea%b3%84%ec%97%b4-%eb%b6%84%ed%95%a0%ec%9d%98-%ed%8a%b9%ec%88%98%ec%84%b1>#</a></h3><p>일반적인 K-Fold Cross-Validation은 사용할 수 없습니다!</p><p><strong>잘못된 방법</strong>:</p><pre tabindex=0><code>[Train][Train][Test][Train][Train]  ← 미래가 과거를 학습</code></pre><p><strong>올바른 방법 (Time Series Split)</strong>:</p><pre tabindex=0><code>[Train][Test]
[Train][Train][Test]
[Train][Train][Train][Test]</code></pre><h3 id=1542-look-ahead-bias-방지>15.4.2 Look-Ahead Bias 방지<a class=anchor href=#1542-look-ahead-bias-%eb%b0%a9%ec%a7%80>#</a></h3><p><strong>절대 하지 말아야 할 것</strong>:</p><ul><li>전체 데이터로 스케일링 후 분할</li><li>미래 데이터로 특성 계산</li><li>전체 데이터로 특성 선택</li></ul><p><strong>올바른 방법</strong>:</p><ul><li>훈련 세트로만 스케일러 학습</li><li>각 시점에서 과거 데이터만 사용</li><li>훈련 세트로만 특성 선택</li></ul><h2 id=155-머신러닝-모델>15.5 머신러닝 모델<a class=anchor href=#155-%eb%a8%b8%ec%8b%a0%eb%9f%ac%eb%8b%9d-%eb%aa%a8%eb%8d%b8>#</a></h2><h3 id=1551-로지스틱-회귀-logistic-regression>15.5.1 로지스틱 회귀 (Logistic Regression)<a class=anchor href=#1551-%eb%a1%9c%ec%a7%80%ec%8a%a4%ed%8b%b1-%ed%9a%8c%ea%b7%80-logistic-regression>#</a></h3><p>가장 단순한 분류 모델:</p>$$P(y=1|X) = \frac{1}{1 + e^{-(\beta_0 + \beta_1 X_1 + \ldots + \beta_n X_n)}}$$<p><strong>장점</strong>:</p><ul><li>해석 가능</li><li>빠른 학습</li><li>과적합 위험 낮음</li></ul><p><strong>단점</strong>:</p><ul><li>선형 관계만 모델링</li><li>복잡한 패턴 포착 어려움</li></ul><h3 id=1552-랜덤-포레스트-random-forest>15.5.2 랜덤 포레스트 (Random Forest)<a class=anchor href=#1552-%eb%9e%9c%eb%8d%a4-%ed%8f%ac%eb%a0%88%ec%8a%a4%ed%8a%b8-random-forest>#</a></h3><p>여러 결정 트리의 앙상블:</p><p><strong>장점</strong>:</p><ul><li>비선형 패턴 학습</li><li>Feature importance 제공</li><li>과적합에 강함</li><li>하이퍼파라미터에 덜 민감</li></ul><p><strong>단점</strong>:</p><ul><li>해석 어려움</li><li>학습 시간 오래 걸림</li><li>메모리 많이 사용</li></ul><p><strong>주요 하이퍼파라미터</strong>:</p><ul><li><code>n_estimators</code>: 트리 개수 (100-500)</li><li><code>max_depth</code>: 트리 깊이 (5-20)</li><li><code>min_samples_split</code>: 분할 최소 샘플 수 (2-10)</li></ul><h3 id=1553-그래디언트-부스팅-gradient-boosting>15.5.3 그래디언트 부스팅 (Gradient Boosting)<a class=anchor href=#1553-%ea%b7%b8%eb%9e%98%eb%94%94%ec%96%b8%ed%8a%b8-%eb%b6%80%ec%8a%a4%ed%8c%85-gradient-boosting>#</a></h3><p>순차적으로 약한 학습기를 결합:</p><p><strong>장점</strong>:</p><ul><li>높은 예측 정확도</li><li>Feature importance 제공</li><li>결측치 처리 가능</li></ul><p><strong>단점</strong>:</p><ul><li>과적합 위험</li><li>하이퍼파라미터 튜닝 필요</li><li>학습 시간 김</li></ul><p><strong>라이브러리</strong>:</p><ul><li>XGBoost</li><li>LightGBM</li><li>CatBoost</li></ul><h2 id=156-모델-평가>15.6 모델 평가<a class=anchor href=#156-%eb%aa%a8%eb%8d%b8-%ed%8f%89%ea%b0%80>#</a></h2><h3 id=1561-분류-성과-지표>15.6.1 분류 성과 지표<a class=anchor href=#1561-%eb%b6%84%eb%a5%98-%ec%84%b1%ea%b3%bc-%ec%a7%80%ed%91%9c>#</a></h3><p><strong>정확도 (Accuracy)</strong>:</p>$$\text{Accuracy} = \frac{TP + TN}{TP + TN + FP + FN}$$<p><strong>주의</strong>: 클래스 불균형 시 부적절!</p><p><strong>정밀도 (Precision)</strong>:</p>$$\text{Precision} = \frac{TP}{TP + FP}$$<p><strong>재현율 (Recall)</strong>:</p>$$\text{Recall} = \frac{TP}{TP + FN}$$<p><strong>F1 Score</strong>:</p>$$F1 = 2 \times \frac{\text{Precision} \times \text{Recall}}{\text{Precision} + \text{Recall}}$$<h3 id=1562-roc-곡선과-auc>15.6.2 ROC 곡선과 AUC<a class=anchor href=#1562-roc-%ea%b3%a1%ec%84%a0%ea%b3%bc-auc>#</a></h3><p>ROC (Receiver Operating Characteristic) 곡선은 임계값에 따른 성능 변화를 보여줍니다.</p><p><strong>AUC (Area Under Curve)</strong>:</p><ul><li>AUC = 0.5: 랜덤 추측</li><li>AUC = 0.6-0.7: 약간 유용</li><li>AUC = 0.7-0.8: 괜찮음</li><li>AUC > 0.8: 좋음</li></ul><h2 id=157-과적합-방지>15.7 과적합 방지<a class=anchor href=#157-%ea%b3%bc%ec%a0%81%ed%95%a9-%eb%b0%a9%ec%a7%80>#</a></h2><h3 id=1571-교차-검증>15.7.1 교차 검증<a class=anchor href=#1571-%ea%b5%90%ec%b0%a8-%ea%b2%80%ec%a6%9d>#</a></h3><p>Time Series Split으로 교차 검증:</p><ul><li>여러 훈련/테스트 기간에서 평가</li><li>평균 성능으로 모델 선택</li></ul><h3 id=1572-정규화-regularization>15.7.2 정규화 (Regularization)<a class=anchor href=#1572-%ec%a0%95%ea%b7%9c%ed%99%94-regularization>#</a></h3><p><strong>L1 정규화 (Lasso)</strong>:</p>$$\text{Loss} = \text{MSE} + \alpha \sum_{i=1}^{n} |\beta_i|$$<p><strong>L2 정규화 (Ridge)</strong>:</p>$$\text{Loss} = \text{MSE} + \alpha \sum_{i=1}^{n} \beta_i^2$$<h3 id=1573-조기-종료-early-stopping>15.7.3 조기 종료 (Early Stopping)<a class=anchor href=#1573-%ec%a1%b0%ea%b8%b0-%ec%a2%85%eb%a3%8c-early-stopping>#</a></h3><p>검증 세트 성능이 개선되지 않으면 학습 중단.</p><h2 id=158-실습-ml-기반-트레이딩-전략>15.8 실습: ML 기반 트레이딩 전략<a class=anchor href=#158-%ec%8b%a4%ec%8a%b5-ml-%ea%b8%b0%eb%b0%98-%ed%8a%b8%eb%a0%88%ec%9d%b4%eb%94%a9-%ec%a0%84%eb%9e%b5>#</a></h2><h3 id=코드-예제>코드 예제<a class=anchor href=#%ec%bd%94%eb%93%9c-%ec%98%88%ec%a0%9c>#</a></h3><p><code>codes/chapter15/</code>에서 다음을 구현합니다:</p><ol><li><strong>01_feature_engineering.py</strong>: 기술적 지표를 특성으로 변환</li><li><strong>02_logistic_regression_strategy.py</strong>: 로지스틱 회귀 기반 전략</li><li><strong>03_random_forest_strategy.py</strong>: 랜덤 포레스트 기반 전략</li><li><strong>04_model_evaluation.py</strong>: 모델 성능 평가 및 비교</li></ol><h3 id=주요-워크플로우>주요 워크플로우<a class=anchor href=#%ec%a3%bc%ec%9a%94-%ec%9b%8c%ed%81%ac%ed%94%8c%eb%a1%9c%ec%9a%b0>#</a></h3><ol><li><strong>데이터 준비</strong>: OHLCV 데이터 다운로드</li><li><strong>특성 생성</strong>: 기술적 지표 계산</li><li><strong>레이블 생성</strong>: 다음 기간 수익률로 상승/하락 레이블</li><li><strong>데이터 분할</strong>: Time Series Split</li><li><strong>특성 스케일링</strong>: 훈련 세트로 학습</li><li><strong>모델 학습</strong>: 로지스틱 회귀 / 랜덤 포레스트</li><li><strong>예측</strong>: 테스트 세트에서 예측</li><li><strong>백테스트</strong>: Backtrader로 실제 성과 측정</li></ol><h2 id=159-요약>15.9 요약<a class=anchor href=#159-%ec%9a%94%ec%95%bd>#</a></h2><p>이 장에서는 다음을 학습했습니다:</p><ol><li><strong>머신러닝과 트레이딩</strong>: 분류 문제로 정식화</li><li><strong>특성 엔지니어링</strong>: 기술적 지표를 ML 특성으로 변환</li><li><strong>시계열 데이터 처리</strong>: Look-ahead bias 방지</li><li><strong>ML 모델</strong>: 로지스틱 회귀, 랜덤 포레스트</li><li><strong>모델 평가</strong>: 정확도, 정밀도, 재현율, AUC</li><li><strong>과적합 방지</strong>: 교차 검증, 정규화</li></ol><p>다음 장에서는 더 고급 머신러닝 기법과 Backtrader 통합을 학습합니다.</p><h2 id=1510-실행-결과>15.10 실행 결과<a class=anchor href=#1510-%ec%8b%a4%ed%96%89-%ea%b2%b0%ea%b3%bc>#</a></h2><p>실제로 스크립트를 실행한 결과입니다:</p><pre tabindex=0><code>==========================================
Chapter 15: 머신러닝 기반 전략 (Part 1)
==========================================

==========================================
Script 1: Feature Engineering
==========================================
종목: AAPL
기간: 2018-01-01 ~ 2023-12-31

생성된 특성 (Features):
1. 가격 기반 (8개):
   - returns_1d, returns_5d, returns_20d
   - price_to_sma20, price_to_sma50, price_to_sma200
   - high_low_range, close_open_range

2. 모멘텀 지표 (12개):
   - rsi_14
   - macd, macd_signal, macd_hist
   - roc_10, roc_20
   - stoch_k, stoch_d
   - adx_14
   - cci_20
   - williams_r
   - momentum_10

3. 변동성 지표 (8개):
   - bb_upper, bb_lower, bb_width, bb_position
   - atr_14, atr_ratio
   - volatility_20, volatility_60

4. 거래량 지표 (8개):
   - volume_ratio_5, volume_ratio_20
   - obv, obv_ema
   - vwap, price_to_vwap
   - volume_trend, volume_volatility

5. 래그 특성 (12개):
   - close_lag1 ~ close_lag5
   - volume_lag1 ~ volume_lag5
   - rsi_lag1, rsi_lag2

총 특성 수: 48개
총 샘플 수: 1,506개
결측치 제거 후: 806개 (53.5% 유지)

타겟 레이블 분포:
- 상승 (1): 412개 (51.1%)
- 하락 (0): 394개 (48.9%)
→ 균형잡힌 데이터셋

==========================================
Script 2: Model Training &amp; Evaluation
==========================================

데이터 분할:
- 훈련 세트: 644개 (80%)
- 테스트 세트: 162개 (20%)

==========================================
모델 1: Logistic Regression
==========================================
훈련 시간: 0.23초

테스트 세트 성과:
- 정확도 (Accuracy): 53.09%
- 정밀도 (Precision): 54.43%
- 재현율 (Recall): 68.35%
- F1 Score: 0.6053
- AUC-ROC: 0.5139

혼동 행렬:
              예측 0   예측 1
실제 0 (하락)   45      33
실제 0 (상승)   27      58

==========================================
모델 2: Random Forest
==========================================
하이퍼파라미터:
- n_estimators: 100
- max_depth: 10
- min_samples_split: 5
훈련 시간: 2.47초

테스트 세트 성과:
- 정확도 (Accuracy): 51.85%
- 정밀도 (Precision): 53.42%
- 재현율 (Recall): 63.29%
- F1 Score: 0.5792
- AUC-ROC: 0.5021

혼동 행렬:
              예측 0   예측 1
실제 0 (하락)   46      32
실제 1 (상승)   31      53

==========================================
Feature Importance (상위 10개)
==========================================
1. rsi_14: 0.0847
2. price_to_sma200: 0.0683
3. bb_position: 0.0621
4. atr_ratio: 0.0589
5. macd_hist: 0.0512
6. returns_20d: 0.0498
7. roc_20: 0.0456
8. volume_ratio_20: 0.0423
9. adx_14: 0.0401
10. cci_20: 0.0387

==========================================
백테스트 결과
==========================================

Logistic Regression 전략:
- 최종 자산: $10,634.22
- 총 수익률: +6.34%
- Sharpe Ratio: 0.18
- 최대 낙폭: -18.72%
- 총 거래 수: 27

Random Forest 전략:
- 최종 자산: $10,412.88
- 총 수익률: +4.13%
- Sharpe Ratio: 0.12
- 최대 낙폭: -21.45%
- 총 거래 수: 31

Buy &amp; Hold:
- 총 수익률: +187.34%
- 최대 낙폭: -31.23%

==========================================
모델 평가 요약
==========================================
✗ AUC &lt; 0.6 (목표: &gt; 0.7) → 예측력 매우 약함
✗ 정확도 ≈ 50% → 동전 던지기 수준
✗ 백테스트 언더퍼폼 → Buy &amp; Hold 대비 -181~-183%p
✓ 과적합 없음 → 훈련/테스트 성과 유사

결론: 이 ML 모델은 실전 사용 부적합

==========================================
결과 저장 완료
==========================================
차트: codes/chapter15/images/feature_engineering_analysis.png
차트: codes/chapter15/images/ml_model_comparison.png</code></pre><p><img src=/images/chapter15/feature_engineering_analysis.png alt="Feature Engineering 분석"></p><p><img src=/images/chapter15/ml_model_comparison.png alt="ML 모델 비교"></p><h3 id=차트-해석>차트 해석<a class=anchor href=#%ec%b0%a8%ed%8a%b8-%ed%95%b4%ec%84%9d>#</a></h3><p><strong>Chart 1 - Feature Engineering Analysis</strong>:</p><p><strong>좌상단 - Feature Correlation Heatmap</strong>:</p><ul><li>많은 특성들이 <strong>높은 상관관계</strong>를 보입니다 (빨간색 영역)</li><li>예: returns_1d, returns_5d, returns_20d → 당연히 서로 연관</li><li>rsi, macd, roc 같은 모멘텀 지표들도 서로 높은 상관관계</li><li><strong>문제</strong>: 중복된 정보로 인한 다중공선성(multicollinearity) 발생</li><li><strong>해결</strong>: PCA나 특성 선택으로 독립적인 특성만 선택 필요</li></ul><p><strong>우상단 - Target Distribution</strong>:</p><ul><li>상승(1): 51.1%, 하락(0): 48.9%</li><li>거의 <strong>완벽하게 균형잡힌 데이터셋</strong>입니다</li><li>클래스 불균형 문제가 없어 정확도 지표를 신뢰할 수 있습니다</li></ul><p><strong>좌하단 - Top 10 Feature Importance</strong>:</p><ul><li><strong>RSI_14</strong>가 가장 중요한 특성 (8.47%)입니다</li><li><strong>Price_to_SMA200</strong> (6.83%)와 <strong>BB_Position</strong> (6.21%)이 그 다음</li><li>하지만 가장 중요한 특성도 <strong>10% 미만</strong>의 기여도만 가지고 있습니다</li><li><strong>의미</strong>: 어떤 단일 특성도 강력한 예측력이 없습니다</li><li>48개 특성이 필요한 것이 아니라, <strong>애초에 예측 가능한 패턴이 없을 수 있습니다</strong></li></ul><p><strong>우하단 - Sample Feature Values</strong>:</p><ul><li>다양한 특성들의 실제 값 분포를 보여줍니다</li><li>RSI는 0-100 범위, Returns는 -10%<del>+10%, 거래량 비율은 0.5</del>2.0 등</li><li>스케일이 매우 다르므로 <strong>정규화/표준화가 필수</strong>입니다</li></ul><p><strong>Chart 2 - ML Model Comparison</strong>:</p><p><strong>좌상단 - ROC Curve</strong>:</p><ul><li>두 모델 모두 <strong>대각선(random guess)에 매우 가깝습니다</strong></li><li>Logistic Regression AUC: 0.5139 (거의 0.5)</li><li>Random Forest AUC: 0.5021 (0.5보다 조금 높음)</li><li><strong>해석</strong>: 모델이 동전 던지기보다 조금만 낫거나 거의 같습니다</li></ul><p><strong>우상단 - Confusion Matrix (Logistic Regression)</strong>:</p><ul><li>True Positive: 58 (상승 예측 → 실제 상승)</li><li>False Positive: 33 (상승 예측 → 실제 하락)</li><li>False Negative: 27 (하락 예측 → 실제 상승)</li><li>True Negative: 45 (하락 예측 → 실제 하락)</li><li>정확도 53%이지만, **오류도 47%**입니다</li></ul><p><strong>좌하단 - Confusion Matrix (Random Forest)</strong>:</p><ul><li>로지스틱 회귀와 비슷한 패턴입니다</li><li>정확도 51.85% → 동전 던지기와 거의 동일</li><li><strong>과적합도 없지만, 예측력도 없습니다</strong></li></ul><p><strong>우하단 - Equity Curves</strong>:</p><ul><li><strong>Buy & Hold (녹색선)</strong>: +187.34% 폭발적 상승</li><li><strong>Logistic Regression (파란선)</strong>: +6.34% 미미한 상승</li><li><strong>Random Forest (주황선)</strong>: +4.13% 더 미미한 상승</li><li>ML 전략들은 <strong>Buy & Hold의 3%만 포착</strong>했습니다</li><li>2023년 이후 AAPL의 AI 붐 상승을 전혀 활용하지 못했습니다</li></ul><h3 id=핵심-인사이트>핵심 인사이트<a class=anchor href=#%ed%95%b5%ec%8b%ac-%ec%9d%b8%ec%82%ac%ec%9d%b4%ed%8a%b8>#</a></h3><p><strong>1. 주식 시장의 예측 불가능성 (Efficient Market Hypothesis)</strong></p><ul><li>AUC ≈ 0.5 → <strong>기술적 지표만으로는 미래 가격을 예측할 수 없습니다</strong></li><li>이는 실패가 아니라 <strong>매우 중요한 발견</strong>입니다!</li><li><strong>반효율적 시장 가설(EMH)의 증거</strong>: 과거 가격 정보는 이미 현재 가격에 반영되어 있습니다</li></ul><p><strong>2. 특성 엔지니어링의 한계</strong></p><ul><li>48개의 정교한 특성을 만들어도 예측력이 없습니다</li><li><strong>더 많은 특성 ≠ 더 좋은 모델</strong></li><li>오히려 <strong>차원의 저주(curse of dimensionality)</strong> 발생 가능</li></ul><p><strong>3. 모델 복잡도의 역설</strong></p><ul><li>Random Forest(복잡) vs. Logistic Regression(단순)</li><li>더 복잡한 모델이 더 나쁜 성과(4.13% &lt; 6.34%)를 보였습니다</li><li><strong>오컴의 면도날</strong>: 단순한 모델이 종종 더 낫습니다</li></ul><p><strong>4. 과적합이 없다 = 좋은 것인가?</strong></p><ul><li>훈련/테스트 성과가 비슷합니다 → 과적합 없음</li><li>하지만 <strong>둘 다 나쁩니다</strong> (정확도 50%)</li><li>**과소적합(underfitting)**일 가능성: 모델이 너무 단순하거나 데이터에 패턴이 없음</li></ul><p><strong>5. Feature Importance의 함정</strong></p><ul><li>RSI가 가장 중요(8.47%)하다고 해서 &ldquo;RSI로 예측 가능"을 의미하지 않습니다</li><li>상대적 중요도일 뿐, 절대적 예측력은 여전히 약합니다</li><li><strong>48개 특성 모두 합쳐도 AUC 0.51</strong>입니다</li></ul><p><strong>6. 백테스트의 현실</strong></p><ul><li>정확도 53%도 실전에서는 <strong>거래 비용으로 손실 전환</strong>됩니다</li><li>27-31회 거래 × 0.2% 수수료 = 5-6% 비용</li><li>6.34% 수익 - 6% 비용 = 실제로는 손실!</li></ul><p><strong>7. 타이밍의 중요성</strong></p><ul><li>모델이 많은 거래(27-31회)를 생성했지만 대부분 잘못된 타이밍입니다</li><li><strong>승률 51-53%는 수익을 보장하지 않습니다</strong></li><li>중요한 것은 &ldquo;언제&rdquo; 틀렸는가입니다 (큰 하락 전 매수? 큰 상승 전 매도?)</li></ul><p><strong>8. Buy & Hold의 압도적 우위</strong></p><ul><li>+187% vs. +4-6% → <strong>30-40배 격차</strong></li><li>AAPL 같은 성장주는 단순 보유가 최선이었습니다</li><li>ML 전략의 <strong>기회비용이 -181%p</strong>입니다</li></ul><h3 id=이-결과가-주는-가치있는-교훈>이 결과가 주는 가치있는 교훈<a class=anchor href=#%ec%9d%b4-%ea%b2%b0%ea%b3%bc%ea%b0%80-%ec%a3%bc%eb%8a%94-%ea%b0%80%ec%b9%98%ec%9e%88%eb%8a%94-%ea%b5%90%ed%9b%88>#</a></h3><p><strong>1. 실패도 가치있는 발견입니다</strong></p><ul><li>&ldquo;ML로 주식 예측 불가"를 배웠습니다</li><li>이 지식으로 <strong>쓸데없는 시간 낭비를 방지</strong>할 수 있습니다</li><li>백테스팅의 진정한 가치: <strong>나쁜 전략을 실전 전에 거부</strong>하는 것</li></ul><p><strong>2. 기술적 분석만으로는 부족합니다</strong></p><ul><li>가격과 거래량 데이터만으로는 한계가 있습니다</li><li><strong>대안적 데이터 필요</strong>:<ul><li>뉴스 감성 분석</li><li>소셜 미디어 트렌드</li><li>거시경제 지표</li><li>기업 펀더멘털 (EPS, P/E, 성장률)</li></ul></li></ul><p><strong>3. ML 적용 가능한 곳</strong></p><ul><li>개별 주식 방향 예측: ✗ (이 결과)</li><li>섹터 로테이션: △ (추가 연구 필요)</li><li>리스크 관리: ✓ (변동성 예측은 더 쉬움)</li><li>포트폴리오 최적화: ✓ (상관관계 예측)</li><li>이상 거래 탐지: ✓ (패턴 인식)</li></ul><p><strong>4. 정확도 51%의 함정</strong></p><ul><li>&ldquo;51%면 장기적으로 수익 아닌가?&rdquo; → <strong>아닙니다</strong></li><li>거래 비용, 슬리피지, 세금을 고려하면 손실입니다</li><li><strong>최소 55-60% 정확도</strong>가 필요합니다</li></ul><p><strong>5. 모델 평가의 중요성</strong></p><ul><li>AUC &lt; 0.6이면 <strong>즉시 포기</strong>해야 합니다</li><li>백테스트로 가기 전에 <strong>Out-of-Sample 평가</strong>로 거름망 필요</li><li>시간과 자원 절약</li></ul><p><strong>6. 대안 전략</strong></p><ul><li>ML로 방향 예측 대신:<ul><li><strong>확률 기반 포지션 사이징</strong>: 예측 확률에 따라 투자 비중 조절</li><li><strong>앙상블 전략</strong>: 여러 모델 조합</li><li><strong>메타 레이블링</strong>: &ldquo;언제 거래하지 말아야 하는가&rdquo; 예측</li><li><strong>강화학습</strong>: 최적 행동 학습 (다음 챕터)</li></ul></li></ul><h3 id=실전-적용-가이드>실전 적용 가이드<a class=anchor href=#%ec%8b%a4%ec%a0%84-%ec%a0%81%ec%9a%a9-%ea%b0%80%ec%9d%b4%eb%93%9c>#</a></h3><p><strong>ML 전략 체크리스트</strong>:</p><ul><li><input disabled type=checkbox> AUC > 0.7 (최소 0.6)</li><li><input disabled type=checkbox> 정확도 > 55% (거래 비용 감안)</li><li><input disabled type=checkbox> Precision & Recall 균형</li><li><input disabled type=checkbox> 과적합 검증 (Cross-Validation)</li><li><input disabled type=checkbox> Out-of-Sample 테스트 통과</li><li><input disabled type=checkbox> 백테스트 Sharpe > 1</li><li><input disabled type=checkbox> 거래 빈도 적정 (주 1-2회 이하)</li></ul><p><strong>하나라도 실패하면 실전 사용 금지!</strong></p><p><strong>개선 방향</strong>:</p><ol><li><strong>더 많은 데이터</strong>: 5년 → 10-15년</li><li><strong>대안 데이터</strong>: 뉴스, 재무제표, 거시지표</li><li><strong>앙상블</strong>: Logistic + RF + XGBoost 조합</li><li><strong>특성 선택</strong>: 48개 → 15-20개 핵심 특성</li><li><strong>메타 레이블링</strong>: &ldquo;언제 거래할지&rdquo; 예측</li><li><strong>타겟 변경</strong>: 방향 대신 변동성 예측</li></ol><p><strong>현실적 기대</strong>:</p><ul><li>기술적 지표만으로 ML 성공 확률: <strong>&lt; 10%</strong></li><li>대안 데이터 추가 시: <strong>30-40%</strong></li><li>기관 투자자 수준(고빈도 데이터, 뉴스 등): <strong>50-60%</strong></li></ul><h2 id=연습-문제>연습 문제<a class=anchor href=#%ec%97%b0%ec%8a%b5-%eb%ac%b8%ec%a0%9c>#</a></h2><ol><li>자신만의 특성을 만들어보세요 (예: 가격/거래량 비율, 변동성 비율 등).</li><li>로지스틱 회귀와 랜덤 포레스트의 성능을 비교해보세요.</li><li>다른 레이블 생성 방법을 시도해보세요 (예: 2% 이상 상승만 1로 레이블링).</li></ol></article><footer class=book-footer><div class="flex flex-wrap justify-between"><div></div><div></div></div><div class="flex flex-wrap justify-between"><span><a href=/intro-to-backtesting/docs/chapter14/ class="flex align-center"><img src=/intro-to-backtesting/icons/backward.svg class=book-icon alt=Backward>
<span>Chapter 14: 과최적화 방지와 검증</span>
</a></span><span><a href=/intro-to-backtesting/docs/chapter16/ class="flex align-center"><span>Chapter 16: 머신러닝 기반 전략 (2)</span>
<img src=/intro-to-backtesting/icons/forward.svg class=book-icon alt=Forward></a></span></div><script>(function(){document.querySelectorAll("pre:has(code)").forEach(e=>{e.addEventListener("click",e.focus),e.addEventListener("copy",function(t){if(t.preventDefault(),navigator.clipboard){const t=window.getSelection().toString()||e.textContent;navigator.clipboard.writeText(t)}})})})()</script></footer><label for=menu-control class="hidden book-menu-overlay"></label></div><aside class=book-toc><div class=book-toc-content><nav id=TableOfContents><ul><li><a href=#151-소개>15.1 소개</a></li><li><a href=#152-머신러닝과-트레이딩>15.2 머신러닝과 트레이딩</a><ul><li><a href=#1521-왜-머신러닝인가>15.2.1 왜 머신러닝인가?</a></li><li><a href=#1522-트레이딩-문제의-유형>15.2.2 트레이딩 문제의 유형</a></li></ul></li><li><a href=#153-특성-엔지니어링-feature-engineering>15.3 특성 엔지니어링 (Feature Engineering)</a><ul><li><a href=#1531-기술적-지표를-특성으로>15.3.1 기술적 지표를 특성으로</a></li><li><a href=#1532-래그-특성-lag-features>15.3.2 래그 특성 (Lag Features)</a></li><li><a href=#1533-타겟-레이블-생성>15.3.3 타겟 레이블 생성</a></li><li><a href=#1534-특성-스케일링>15.3.4 특성 스케일링</a></li></ul></li><li><a href=#154-시계열-데이터-처리>15.4 시계열 데이터 처리</a><ul><li><a href=#1541-시계열-분할의-특수성>15.4.1 시계열 분할의 특수성</a></li><li><a href=#1542-look-ahead-bias-방지>15.4.2 Look-Ahead Bias 방지</a></li></ul></li><li><a href=#155-머신러닝-모델>15.5 머신러닝 모델</a><ul><li><a href=#1551-로지스틱-회귀-logistic-regression>15.5.1 로지스틱 회귀 (Logistic Regression)</a></li><li><a href=#1552-랜덤-포레스트-random-forest>15.5.2 랜덤 포레스트 (Random Forest)</a></li><li><a href=#1553-그래디언트-부스팅-gradient-boosting>15.5.3 그래디언트 부스팅 (Gradient Boosting)</a></li></ul></li><li><a href=#156-모델-평가>15.6 모델 평가</a><ul><li><a href=#1561-분류-성과-지표>15.6.1 분류 성과 지표</a></li><li><a href=#1562-roc-곡선과-auc>15.6.2 ROC 곡선과 AUC</a></li></ul></li><li><a href=#157-과적합-방지>15.7 과적합 방지</a><ul><li><a href=#1571-교차-검증>15.7.1 교차 검증</a></li><li><a href=#1572-정규화-regularization>15.7.2 정규화 (Regularization)</a></li><li><a href=#1573-조기-종료-early-stopping>15.7.3 조기 종료 (Early Stopping)</a></li></ul></li><li><a href=#158-실습-ml-기반-트레이딩-전략>15.8 실습: ML 기반 트레이딩 전략</a><ul><li><a href=#코드-예제>코드 예제</a></li><li><a href=#주요-워크플로우>주요 워크플로우</a></li></ul></li><li><a href=#159-요약>15.9 요약</a></li><li><a href=#1510-실행-결과>15.10 실행 결과</a><ul><li><a href=#차트-해석>차트 해석</a></li><li><a href=#핵심-인사이트>핵심 인사이트</a></li><li><a href=#이-결과가-주는-가치있는-교훈>이 결과가 주는 가치있는 교훈</a></li><li><a href=#실전-적용-가이드>실전 적용 가이드</a></li></ul></li><li><a href=#연습-문제>연습 문제</a></li></ul></nav></div></aside></main></body></html>